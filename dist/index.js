import './sourcemap-register.cjs';import{createRequire as s}from"module";var i={513:function(s,i,r){var n=this&&this.__createBinding||(Object.create?function(s,i,r,n){if(n===undefined)n=r;Object.defineProperty(s,n,{enumerable:true,get:function(){return i[r]}})}:function(s,i,r,n){if(n===undefined)n=r;s[n]=i[r]});var o=this&&this.__setModuleDefault||(Object.create?function(s,i){Object.defineProperty(s,"default",{enumerable:true,value:i})}:function(s,i){s["default"]=i});var a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(s!=null)for(var r in s)if(r!=="default"&&Object.hasOwnProperty.call(s,r))n(i,s,r);o(i,s);return i};Object.defineProperty(i,"__esModule",{value:true});i.issue=i.issueCommand=void 0;const h=a(r(37));const l=r(120);function issueCommand(s,i,r){const n=new Command(s,i,r);process.stdout.write(n.toString()+h.EOL)}i.issueCommand=issueCommand;function issue(s,i=""){issueCommand(s,{},i)}i.issue=issue;const c="::";class Command{constructor(s,i,r){if(!s){s="missing.command"}this.command=s;this.properties=i;this.message=r}toString(){let s=c+this.command;if(this.properties&&Object.keys(this.properties).length>0){s+=" ";let i=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(i){i=false}else{s+=","}s+=`${r}=${escapeProperty(n)}`}}}}s+=`${c}${escapeData(this.message)}`;return s}}function escapeData(s){return l.toCommandValue(s).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(s){return l.toCommandValue(s).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},93:function(s,i,r){var n=this&&this.__createBinding||(Object.create?function(s,i,r,n){if(n===undefined)n=r;Object.defineProperty(s,n,{enumerable:true,get:function(){return i[r]}})}:function(s,i,r,n){if(n===undefined)n=r;s[n]=i[r]});var o=this&&this.__setModuleDefault||(Object.create?function(s,i){Object.defineProperty(s,"default",{enumerable:true,value:i})}:function(s,i){s["default"]=i});var a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(s!=null)for(var r in s)if(r!=="default"&&Object.hasOwnProperty.call(s,r))n(i,s,r);o(i,s);return i};var h=this&&this.__awaiter||function(s,i,r,n){function adopt(s){return s instanceof r?s:new r((function(i){i(s)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(s){try{step(n.next(s))}catch(s){o(s)}}function rejected(s){try{step(n["throw"](s))}catch(s){o(s)}}function step(s){s.done?r(s.value):adopt(s.value).then(fulfilled,rejected)}step((n=n.apply(s,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:true});i.getIDToken=i.getState=i.saveState=i.group=i.endGroup=i.startGroup=i.info=i.notice=i.warning=i.error=i.debug=i.isDebug=i.setFailed=i.setCommandEcho=i.setOutput=i.getBooleanInput=i.getMultilineInput=i.getInput=i.addPath=i.setSecret=i.exportVariable=i.ExitCode=void 0;const l=r(513);const c=r(17);const u=r(120);const f=a(r(37));const d=a(r(822));const p=r(141);var g;(function(s){s[s["Success"]=0]="Success";s[s["Failure"]=1]="Failure"})(g=i.ExitCode||(i.ExitCode={}));function exportVariable(s,i){const r=u.toCommandValue(i);process.env[s]=r;const n=process.env["GITHUB_ENV"]||"";if(n){return c.issueFileCommand("ENV",c.prepareKeyValueMessage(s,i))}l.issueCommand("set-env",{name:s},r)}i.exportVariable=exportVariable;function setSecret(s){l.issueCommand("add-mask",{},s)}i.setSecret=setSecret;function addPath(s){const i=process.env["GITHUB_PATH"]||"";if(i){c.issueFileCommand("PATH",s)}else{l.issueCommand("add-path",{},s)}process.env["PATH"]=`${s}${d.delimiter}${process.env["PATH"]}`}i.addPath=addPath;function getInput(s,i){const r=process.env[`INPUT_${s.replace(/ /g,"_").toUpperCase()}`]||"";if(i&&i.required&&!r){throw new Error(`Input required and not supplied: ${s}`)}if(i&&i.trimWhitespace===false){return r}return r.trim()}i.getInput=getInput;function getMultilineInput(s,i){const r=getInput(s,i).split("\n").filter((s=>s!==""));if(i&&i.trimWhitespace===false){return r}return r.map((s=>s.trim()))}i.getMultilineInput=getMultilineInput;function getBooleanInput(s,i){const r=["true","True","TRUE"];const n=["false","False","FALSE"];const o=getInput(s,i);if(r.includes(o))return true;if(n.includes(o))return false;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${s}\n`+`Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}i.getBooleanInput=getBooleanInput;function setOutput(s,i){const r=process.env["GITHUB_OUTPUT"]||"";if(r){return c.issueFileCommand("OUTPUT",c.prepareKeyValueMessage(s,i))}process.stdout.write(f.EOL);l.issueCommand("set-output",{name:s},u.toCommandValue(i))}i.setOutput=setOutput;function setCommandEcho(s){l.issue("echo",s?"on":"off")}i.setCommandEcho=setCommandEcho;function setFailed(s){process.exitCode=g.Failure;error(s)}i.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}i.isDebug=isDebug;function debug(s){l.issueCommand("debug",{},s)}i.debug=debug;function error(s,i={}){l.issueCommand("error",u.toCommandProperties(i),s instanceof Error?s.toString():s)}i.error=error;function warning(s,i={}){l.issueCommand("warning",u.toCommandProperties(i),s instanceof Error?s.toString():s)}i.warning=warning;function notice(s,i={}){l.issueCommand("notice",u.toCommandProperties(i),s instanceof Error?s.toString():s)}i.notice=notice;function info(s){process.stdout.write(s+f.EOL)}i.info=info;function startGroup(s){l.issue("group",s)}i.startGroup=startGroup;function endGroup(){l.issue("endgroup")}i.endGroup=endGroup;function group(s,i){return h(this,void 0,void 0,(function*(){startGroup(s);let r;try{r=yield i()}finally{endGroup()}return r}))}i.group=group;function saveState(s,i){const r=process.env["GITHUB_STATE"]||"";if(r){return c.issueFileCommand("STATE",c.prepareKeyValueMessage(s,i))}l.issueCommand("save-state",{name:s},u.toCommandValue(i))}i.saveState=saveState;function getState(s){return process.env[`STATE_${s}`]||""}i.getState=getState;function getIDToken(s){return h(this,void 0,void 0,(function*(){return yield p.OidcClient.getIDToken(s)}))}i.getIDToken=getIDToken;var y=r(276);Object.defineProperty(i,"summary",{enumerable:true,get:function(){return y.summary}});var w=r(276);Object.defineProperty(i,"markdownSummary",{enumerable:true,get:function(){return w.markdownSummary}});var v=r(670);Object.defineProperty(i,"toPosixPath",{enumerable:true,get:function(){return v.toPosixPath}});Object.defineProperty(i,"toWin32Path",{enumerable:true,get:function(){return v.toWin32Path}});Object.defineProperty(i,"toPlatformPath",{enumerable:true,get:function(){return v.toPlatformPath}})},17:function(s,i,r){var n=this&&this.__createBinding||(Object.create?function(s,i,r,n){if(n===undefined)n=r;Object.defineProperty(s,n,{enumerable:true,get:function(){return i[r]}})}:function(s,i,r,n){if(n===undefined)n=r;s[n]=i[r]});var o=this&&this.__setModuleDefault||(Object.create?function(s,i){Object.defineProperty(s,"default",{enumerable:true,value:i})}:function(s,i){s["default"]=i});var a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(s!=null)for(var r in s)if(r!=="default"&&Object.hasOwnProperty.call(s,r))n(i,s,r);o(i,s);return i};Object.defineProperty(i,"__esModule",{value:true});i.prepareKeyValueMessage=i.issueFileCommand=void 0;const h=a(r(147));const l=a(r(37));const c=r(338);const u=r(120);function issueFileCommand(s,i){const r=process.env[`GITHUB_${s}`];if(!r){throw new Error(`Unable to find environment variable for file command ${s}`)}if(!h.existsSync(r)){throw new Error(`Missing file at path: ${r}`)}h.appendFileSync(r,`${u.toCommandValue(i)}${l.EOL}`,{encoding:"utf8"})}i.issueFileCommand=issueFileCommand;function prepareKeyValueMessage(s,i){const r=`ghadelimiter_${c.v4()}`;const n=u.toCommandValue(i);if(s.includes(r)){throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`)}if(n.includes(r)){throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`)}return`${s}<<${r}${l.EOL}${n}${l.EOL}${r}`}i.prepareKeyValueMessage=prepareKeyValueMessage},141:function(s,i,r){var n=this&&this.__awaiter||function(s,i,r,n){function adopt(s){return s instanceof r?s:new r((function(i){i(s)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(s){try{step(n.next(s))}catch(s){o(s)}}function rejected(s){try{step(n["throw"](s))}catch(s){o(s)}}function step(s){s.done?r(s.value):adopt(s.value).then(fulfilled,rejected)}step((n=n.apply(s,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:true});i.OidcClient=void 0;const o=r(21);const a=r(418);const h=r(93);class OidcClient{static createHttpClient(s=true,i=10){const r={allowRetries:s,maxRetries:i};return new o.HttpClient("actions/oidc-client",[new a.BearerCredentialHandler(OidcClient.getRequestToken())],r)}static getRequestToken(){const s=process.env["ACTIONS_ID_TOKEN_REQUEST_TOKEN"];if(!s){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable")}return s}static getIDTokenUrl(){const s=process.env["ACTIONS_ID_TOKEN_REQUEST_URL"];if(!s){throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable")}return s}static getCall(s){var i;return n(this,void 0,void 0,(function*(){const r=OidcClient.createHttpClient();const n=yield r.getJson(s).catch((s=>{throw new Error(`Failed to get ID Token. \n \n        Error Code : ${s.statusCode}\n \n        Error Message: ${s.message}`)}));const o=(i=n.result)===null||i===void 0?void 0:i.value;if(!o){throw new Error("Response json body do not have ID Token field")}return o}))}static getIDToken(s){return n(this,void 0,void 0,(function*(){try{let i=OidcClient.getIDTokenUrl();if(s){const r=encodeURIComponent(s);i=`${i}&audience=${r}`}h.debug(`ID token url is ${i}`);const r=yield OidcClient.getCall(i);h.setSecret(r);return r}catch(s){throw new Error(`Error message: ${s.message}`)}}))}}i.OidcClient=OidcClient},670:function(s,i,r){var n=this&&this.__createBinding||(Object.create?function(s,i,r,n){if(n===undefined)n=r;Object.defineProperty(s,n,{enumerable:true,get:function(){return i[r]}})}:function(s,i,r,n){if(n===undefined)n=r;s[n]=i[r]});var o=this&&this.__setModuleDefault||(Object.create?function(s,i){Object.defineProperty(s,"default",{enumerable:true,value:i})}:function(s,i){s["default"]=i});var a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(s!=null)for(var r in s)if(r!=="default"&&Object.hasOwnProperty.call(s,r))n(i,s,r);o(i,s);return i};Object.defineProperty(i,"__esModule",{value:true});i.toPlatformPath=i.toWin32Path=i.toPosixPath=void 0;const h=a(r(822));function toPosixPath(s){return s.replace(/[\\]/g,"/")}i.toPosixPath=toPosixPath;function toWin32Path(s){return s.replace(/[/]/g,"\\")}i.toWin32Path=toWin32Path;function toPlatformPath(s){return s.replace(/[/\\]/g,h.sep)}i.toPlatformPath=toPlatformPath},276:function(s,i,r){var n=this&&this.__awaiter||function(s,i,r,n){function adopt(s){return s instanceof r?s:new r((function(i){i(s)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(s){try{step(n.next(s))}catch(s){o(s)}}function rejected(s){try{step(n["throw"](s))}catch(s){o(s)}}function step(s){s.done?r(s.value):adopt(s.value).then(fulfilled,rejected)}step((n=n.apply(s,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:true});i.summary=i.markdownSummary=i.SUMMARY_DOCS_URL=i.SUMMARY_ENV_VAR=void 0;const o=r(37);const a=r(147);const{access:h,appendFile:l,writeFile:c}=a.promises;i.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";i.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class Summary{constructor(){this._buffer=""}filePath(){return n(this,void 0,void 0,(function*(){if(this._filePath){return this._filePath}const s=process.env[i.SUMMARY_ENV_VAR];if(!s){throw new Error(`Unable to find environment variable for $${i.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`)}try{yield h(s,a.constants.R_OK|a.constants.W_OK)}catch(i){throw new Error(`Unable to access summary file: '${s}'. Check if the file has correct read/write permissions.`)}this._filePath=s;return this._filePath}))}wrap(s,i,r={}){const n=Object.entries(r).map((([s,i])=>` ${s}="${i}"`)).join("");if(!i){return`<${s}${n}>`}return`<${s}${n}>${i}</${s}>`}write(s){return n(this,void 0,void 0,(function*(){const i=!!(s===null||s===void 0?void 0:s.overwrite);const r=yield this.filePath();const n=i?c:l;yield n(r,this._buffer,{encoding:"utf8"});return this.emptyBuffer()}))}clear(){return n(this,void 0,void 0,(function*(){return this.emptyBuffer().write({overwrite:true})}))}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){this._buffer="";return this}addRaw(s,i=false){this._buffer+=s;return i?this.addEOL():this}addEOL(){return this.addRaw(o.EOL)}addCodeBlock(s,i){const r=Object.assign({},i&&{lang:i});const n=this.wrap("pre",this.wrap("code",s),r);return this.addRaw(n).addEOL()}addList(s,i=false){const r=i?"ol":"ul";const n=s.map((s=>this.wrap("li",s))).join("");const o=this.wrap(r,n);return this.addRaw(o).addEOL()}addTable(s){const i=s.map((s=>{const i=s.map((s=>{if(typeof s==="string"){return this.wrap("td",s)}const{header:i,data:r,colspan:n,rowspan:o}=s;const a=i?"th":"td";const h=Object.assign(Object.assign({},n&&{colspan:n}),o&&{rowspan:o});return this.wrap(a,r,h)})).join("");return this.wrap("tr",i)})).join("");const r=this.wrap("table",i);return this.addRaw(r).addEOL()}addDetails(s,i){const r=this.wrap("details",this.wrap("summary",s)+i);return this.addRaw(r).addEOL()}addImage(s,i,r){const{width:n,height:o}=r||{};const a=Object.assign(Object.assign({},n&&{width:n}),o&&{height:o});const h=this.wrap("img",null,Object.assign({src:s,alt:i},a));return this.addRaw(h).addEOL()}addHeading(s,i){const r=`h${i}`;const n=["h1","h2","h3","h4","h5","h6"].includes(r)?r:"h1";const o=this.wrap(n,s);return this.addRaw(o).addEOL()}addSeparator(){const s=this.wrap("hr",null);return this.addRaw(s).addEOL()}addBreak(){const s=this.wrap("br",null);return this.addRaw(s).addEOL()}addQuote(s,i){const r=Object.assign({},i&&{cite:i});const n=this.wrap("blockquote",s,r);return this.addRaw(n).addEOL()}addLink(s,i){const r=this.wrap("a",s,{href:i});return this.addRaw(r).addEOL()}}const u=new Summary;i.markdownSummary=u;i.summary=u},120:(s,i)=>{Object.defineProperty(i,"__esModule",{value:true});i.toCommandProperties=i.toCommandValue=void 0;function toCommandValue(s){if(s===null||s===undefined){return""}else if(typeof s==="string"||s instanceof String){return s}return JSON.stringify(s)}i.toCommandValue=toCommandValue;function toCommandProperties(s){if(!Object.keys(s).length){return{}}return{title:s.title,file:s.file,line:s.startLine,endLine:s.endLine,col:s.startColumn,endColumn:s.endColumn}}i.toCommandProperties=toCommandProperties},418:function(s,i){var r=this&&this.__awaiter||function(s,i,r,n){function adopt(s){return s instanceof r?s:new r((function(i){i(s)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(s){try{step(n.next(s))}catch(s){o(s)}}function rejected(s){try{step(n["throw"](s))}catch(s){o(s)}}function step(s){s.done?r(s.value):adopt(s.value).then(fulfilled,rejected)}step((n=n.apply(s,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:true});i.PersonalAccessTokenCredentialHandler=i.BearerCredentialHandler=i.BasicCredentialHandler=void 0;class BasicCredentialHandler{constructor(s,i){this.username=s;this.password=i}prepareRequest(s){if(!s.headers){throw Error("The request has no headers")}s.headers["Authorization"]=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}i.BasicCredentialHandler=BasicCredentialHandler;class BearerCredentialHandler{constructor(s){this.token=s}prepareRequest(s){if(!s.headers){throw Error("The request has no headers")}s.headers["Authorization"]=`Bearer ${this.token}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}i.BearerCredentialHandler=BearerCredentialHandler;class PersonalAccessTokenCredentialHandler{constructor(s){this.token=s}prepareRequest(s){if(!s.headers){throw Error("The request has no headers")}s.headers["Authorization"]=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return false}handleAuthentication(){return r(this,void 0,void 0,(function*(){throw new Error("not implemented")}))}}i.PersonalAccessTokenCredentialHandler=PersonalAccessTokenCredentialHandler},21:function(s,i,r){var n=this&&this.__createBinding||(Object.create?function(s,i,r,n){if(n===undefined)n=r;Object.defineProperty(s,n,{enumerable:true,get:function(){return i[r]}})}:function(s,i,r,n){if(n===undefined)n=r;s[n]=i[r]});var o=this&&this.__setModuleDefault||(Object.create?function(s,i){Object.defineProperty(s,"default",{enumerable:true,value:i})}:function(s,i){s["default"]=i});var a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var i={};if(s!=null)for(var r in s)if(r!=="default"&&Object.hasOwnProperty.call(s,r))n(i,s,r);o(i,s);return i};var h=this&&this.__awaiter||function(s,i,r,n){function adopt(s){return s instanceof r?s:new r((function(i){i(s)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(s){try{step(n.next(s))}catch(s){o(s)}}function rejected(s){try{step(n["throw"](s))}catch(s){o(s)}}function step(s){s.done?r(s.value):adopt(s.value).then(fulfilled,rejected)}step((n=n.apply(s,i||[])).next())}))};Object.defineProperty(i,"__esModule",{value:true});i.HttpClient=i.isHttps=i.HttpClientResponse=i.HttpClientError=i.getProxyUrl=i.MediaTypes=i.Headers=i.HttpCodes=void 0;const l=a(r(685));const c=a(r(687));const u=a(r(343));const f=a(r(225));var d;(function(s){s[s["OK"]=200]="OK";s[s["MultipleChoices"]=300]="MultipleChoices";s[s["MovedPermanently"]=301]="MovedPermanently";s[s["ResourceMoved"]=302]="ResourceMoved";s[s["SeeOther"]=303]="SeeOther";s[s["NotModified"]=304]="NotModified";s[s["UseProxy"]=305]="UseProxy";s[s["SwitchProxy"]=306]="SwitchProxy";s[s["TemporaryRedirect"]=307]="TemporaryRedirect";s[s["PermanentRedirect"]=308]="PermanentRedirect";s[s["BadRequest"]=400]="BadRequest";s[s["Unauthorized"]=401]="Unauthorized";s[s["PaymentRequired"]=402]="PaymentRequired";s[s["Forbidden"]=403]="Forbidden";s[s["NotFound"]=404]="NotFound";s[s["MethodNotAllowed"]=405]="MethodNotAllowed";s[s["NotAcceptable"]=406]="NotAcceptable";s[s["ProxyAuthenticationRequired"]=407]="ProxyAuthenticationRequired";s[s["RequestTimeout"]=408]="RequestTimeout";s[s["Conflict"]=409]="Conflict";s[s["Gone"]=410]="Gone";s[s["TooManyRequests"]=429]="TooManyRequests";s[s["InternalServerError"]=500]="InternalServerError";s[s["NotImplemented"]=501]="NotImplemented";s[s["BadGateway"]=502]="BadGateway";s[s["ServiceUnavailable"]=503]="ServiceUnavailable";s[s["GatewayTimeout"]=504]="GatewayTimeout"})(d=i.HttpCodes||(i.HttpCodes={}));var p;(function(s){s["Accept"]="accept";s["ContentType"]="content-type"})(p=i.Headers||(i.Headers={}));var g;(function(s){s["ApplicationJson"]="application/json"})(g=i.MediaTypes||(i.MediaTypes={}));function getProxyUrl(s){const i=u.getProxyUrl(new URL(s));return i?i.href:""}i.getProxyUrl=getProxyUrl;const y=[d.MovedPermanently,d.ResourceMoved,d.SeeOther,d.TemporaryRedirect,d.PermanentRedirect];const w=[d.BadGateway,d.ServiceUnavailable,d.GatewayTimeout];const v=["OPTIONS","GET","DELETE","HEAD"];const b=10;const S=5;class HttpClientError extends Error{constructor(s,i){super(s);this.name="HttpClientError";this.statusCode=i;Object.setPrototypeOf(this,HttpClientError.prototype)}}i.HttpClientError=HttpClientError;class HttpClientResponse{constructor(s){this.message=s}readBody(){return h(this,void 0,void 0,(function*(){return new Promise((s=>h(this,void 0,void 0,(function*(){let i=Buffer.alloc(0);this.message.on("data",(s=>{i=Buffer.concat([i,s])}));this.message.on("end",(()=>{s(i.toString())}))}))))}))}readBodyBuffer(){return h(this,void 0,void 0,(function*(){return new Promise((s=>h(this,void 0,void 0,(function*(){const i=[];this.message.on("data",(s=>{i.push(s)}));this.message.on("end",(()=>{s(Buffer.concat(i))}))}))))}))}}i.HttpClientResponse=HttpClientResponse;function isHttps(s){const i=new URL(s);return i.protocol==="https:"}i.isHttps=isHttps;class HttpClient{constructor(s,i,r){this._ignoreSslError=false;this._allowRedirects=true;this._allowRedirectDowngrade=false;this._maxRedirects=50;this._allowRetries=false;this._maxRetries=1;this._keepAlive=false;this._disposed=false;this.userAgent=s;this.handlers=i||[];this.requestOptions=r;if(r){if(r.ignoreSslError!=null){this._ignoreSslError=r.ignoreSslError}this._socketTimeout=r.socketTimeout;if(r.allowRedirects!=null){this._allowRedirects=r.allowRedirects}if(r.allowRedirectDowngrade!=null){this._allowRedirectDowngrade=r.allowRedirectDowngrade}if(r.maxRedirects!=null){this._maxRedirects=Math.max(r.maxRedirects,0)}if(r.keepAlive!=null){this._keepAlive=r.keepAlive}if(r.allowRetries!=null){this._allowRetries=r.allowRetries}if(r.maxRetries!=null){this._maxRetries=r.maxRetries}}}options(s,i){return h(this,void 0,void 0,(function*(){return this.request("OPTIONS",s,null,i||{})}))}get(s,i){return h(this,void 0,void 0,(function*(){return this.request("GET",s,null,i||{})}))}del(s,i){return h(this,void 0,void 0,(function*(){return this.request("DELETE",s,null,i||{})}))}post(s,i,r){return h(this,void 0,void 0,(function*(){return this.request("POST",s,i,r||{})}))}patch(s,i,r){return h(this,void 0,void 0,(function*(){return this.request("PATCH",s,i,r||{})}))}put(s,i,r){return h(this,void 0,void 0,(function*(){return this.request("PUT",s,i,r||{})}))}head(s,i){return h(this,void 0,void 0,(function*(){return this.request("HEAD",s,null,i||{})}))}sendStream(s,i,r,n){return h(this,void 0,void 0,(function*(){return this.request(s,i,r,n)}))}getJson(s,i={}){return h(this,void 0,void 0,(function*(){i[p.Accept]=this._getExistingOrDefaultHeader(i,p.Accept,g.ApplicationJson);const r=yield this.get(s,i);return this._processResponse(r,this.requestOptions)}))}postJson(s,i,r={}){return h(this,void 0,void 0,(function*(){const n=JSON.stringify(i,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,g.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,g.ApplicationJson);const o=yield this.post(s,n,r);return this._processResponse(o,this.requestOptions)}))}putJson(s,i,r={}){return h(this,void 0,void 0,(function*(){const n=JSON.stringify(i,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,g.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,g.ApplicationJson);const o=yield this.put(s,n,r);return this._processResponse(o,this.requestOptions)}))}patchJson(s,i,r={}){return h(this,void 0,void 0,(function*(){const n=JSON.stringify(i,null,2);r[p.Accept]=this._getExistingOrDefaultHeader(r,p.Accept,g.ApplicationJson);r[p.ContentType]=this._getExistingOrDefaultHeader(r,p.ContentType,g.ApplicationJson);const o=yield this.patch(s,n,r);return this._processResponse(o,this.requestOptions)}))}request(s,i,r,n){return h(this,void 0,void 0,(function*(){if(this._disposed){throw new Error("Client has already been disposed.")}const o=new URL(i);let a=this._prepareRequest(s,o,n);const h=this._allowRetries&&v.includes(s)?this._maxRetries+1:1;let l=0;let c;do{c=yield this.requestRaw(a,r);if(c&&c.message&&c.message.statusCode===d.Unauthorized){let s;for(const i of this.handlers){if(i.canHandleAuthentication(c)){s=i;break}}if(s){return s.handleAuthentication(this,a,r)}else{return c}}let i=this._maxRedirects;while(c.message.statusCode&&y.includes(c.message.statusCode)&&this._allowRedirects&&i>0){const h=c.message.headers["location"];if(!h){break}const l=new URL(h);if(o.protocol==="https:"&&o.protocol!==l.protocol&&!this._allowRedirectDowngrade){throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.")}yield c.readBody();if(l.hostname!==o.hostname){for(const s in n){if(s.toLowerCase()==="authorization"){delete n[s]}}}a=this._prepareRequest(s,l,n);c=yield this.requestRaw(a,r);i--}if(!c.message.statusCode||!w.includes(c.message.statusCode)){return c}l+=1;if(l<h){yield c.readBody();yield this._performExponentialBackoff(l)}}while(l<h);return c}))}dispose(){if(this._agent){this._agent.destroy()}this._disposed=true}requestRaw(s,i){return h(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{function callbackForResult(s,i){if(s){n(s)}else if(!i){n(new Error("Unknown error"))}else{r(i)}}this.requestRawWithCallback(s,i,callbackForResult)}))}))}requestRawWithCallback(s,i,r){if(typeof i==="string"){if(!s.options.headers){s.options.headers={}}s.options.headers["Content-Length"]=Buffer.byteLength(i,"utf8")}let n=false;function handleResult(s,i){if(!n){n=true;r(s,i)}}const o=s.httpModule.request(s.options,(s=>{const i=new HttpClientResponse(s);handleResult(undefined,i)}));let a;o.on("socket",(s=>{a=s}));o.setTimeout(this._socketTimeout||3*6e4,(()=>{if(a){a.end()}handleResult(new Error(`Request timeout: ${s.options.path}`))}));o.on("error",(function(s){handleResult(s)}));if(i&&typeof i==="string"){o.write(i,"utf8")}if(i&&typeof i!=="string"){i.on("close",(function(){o.end()}));i.pipe(o)}else{o.end()}}getAgent(s){const i=new URL(s);return this._getAgent(i)}_prepareRequest(s,i,r){const n={};n.parsedUrl=i;const o=n.parsedUrl.protocol==="https:";n.httpModule=o?c:l;const a=o?443:80;n.options={};n.options.host=n.parsedUrl.hostname;n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):a;n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||"");n.options.method=s;n.options.headers=this._mergeHeaders(r);if(this.userAgent!=null){n.options.headers["user-agent"]=this.userAgent}n.options.agent=this._getAgent(n.parsedUrl);if(this.handlers){for(const s of this.handlers){s.prepareRequest(n.options)}}return n}_mergeHeaders(s){if(this.requestOptions&&this.requestOptions.headers){return Object.assign({},lowercaseKeys(this.requestOptions.headers),lowercaseKeys(s||{}))}return lowercaseKeys(s||{})}_getExistingOrDefaultHeader(s,i,r){let n;if(this.requestOptions&&this.requestOptions.headers){n=lowercaseKeys(this.requestOptions.headers)[i]}return s[i]||n||r}_getAgent(s){let i;const r=u.getProxyUrl(s);const n=r&&r.hostname;if(this._keepAlive&&n){i=this._proxyAgent}if(this._keepAlive&&!n){i=this._agent}if(i){return i}const o=s.protocol==="https:";let a=100;if(this.requestOptions){a=this.requestOptions.maxSockets||l.globalAgent.maxSockets}if(r&&r.hostname){const s={maxSockets:a,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(r.username||r.password)&&{proxyAuth:`${r.username}:${r.password}`}),{host:r.hostname,port:r.port})};let n;const h=r.protocol==="https:";if(o){n=h?f.httpsOverHttps:f.httpsOverHttp}else{n=h?f.httpOverHttps:f.httpOverHttp}i=n(s);this._proxyAgent=i}if(this._keepAlive&&!i){const s={keepAlive:this._keepAlive,maxSockets:a};i=o?new c.Agent(s):new l.Agent(s);this._agent=i}if(!i){i=o?c.globalAgent:l.globalAgent}if(o&&this._ignoreSslError){i.options=Object.assign(i.options||{},{rejectUnauthorized:false})}return i}_performExponentialBackoff(s){return h(this,void 0,void 0,(function*(){s=Math.min(b,s);const i=S*Math.pow(2,s);return new Promise((s=>setTimeout((()=>s()),i)))}))}_processResponse(s,i){return h(this,void 0,void 0,(function*(){return new Promise(((r,n)=>h(this,void 0,void 0,(function*(){const o=s.message.statusCode||0;const a={statusCode:o,result:null,headers:{}};if(o===d.NotFound){r(a)}function dateTimeDeserializer(s,i){if(typeof i==="string"){const s=new Date(i);if(!isNaN(s.valueOf())){return s}}return i}let h;let l;try{l=yield s.readBody();if(l&&l.length>0){if(i&&i.deserializeDates){h=JSON.parse(l,dateTimeDeserializer)}else{h=JSON.parse(l)}a.result=h}a.headers=s.message.headers}catch(s){}if(o>299){let s;if(h&&h.message){s=h.message}else if(l&&l.length>0){s=l}else{s=`Failed request: (${o})`}const i=new HttpClientError(s,o);i.result=a.result;n(i)}else{r(a)}}))))}))}}i.HttpClient=HttpClient;const lowercaseKeys=s=>Object.keys(s).reduce(((i,r)=>(i[r.toLowerCase()]=s[r],i)),{})},343:(s,i)=>{Object.defineProperty(i,"__esModule",{value:true});i.checkBypass=i.getProxyUrl=void 0;function getProxyUrl(s){const i=s.protocol==="https:";if(checkBypass(s)){return undefined}const r=(()=>{if(i){return process.env["https_proxy"]||process.env["HTTPS_PROXY"]}else{return process.env["http_proxy"]||process.env["HTTP_PROXY"]}})();if(r){try{return new URL(r)}catch(s){if(!r.startsWith("http://")&&!r.startsWith("https://"))return new URL(`http://${r}`)}}else{return undefined}}i.getProxyUrl=getProxyUrl;function checkBypass(s){if(!s.hostname){return false}const i=s.hostname;if(isLoopbackAddress(i)){return true}const r=process.env["no_proxy"]||process.env["NO_PROXY"]||"";if(!r){return false}let n;if(s.port){n=Number(s.port)}else if(s.protocol==="http:"){n=80}else if(s.protocol==="https:"){n=443}const o=[s.hostname.toUpperCase()];if(typeof n==="number"){o.push(`${o[0]}:${n}`)}for(const s of r.split(",").map((s=>s.trim().toUpperCase())).filter((s=>s))){if(s==="*"||o.some((i=>i===s||i.endsWith(`.${s}`)||s.startsWith(".")&&i.endsWith(`${s}`)))){return true}}return false}i.checkBypass=checkBypass;function isLoopbackAddress(s){const i=s.toLowerCase();return i==="localhost"||i.startsWith("127.")||i.startsWith("[::1]")||i.startsWith("[0:0:0:0:0:0:0:1]")}},665:function(s,i,r){var n=this&&this.__assign||function(){n=Object.assign||function(s){for(var i,r=1,n=arguments.length;r<n;r++){i=arguments[r];for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o))s[o]=i[o]}return s};return n.apply(this,arguments)};var o=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(i,"__esModule",{value:true});i.getInput=void 0;var a=o(r(950));a.default.config();var h=["string","array","boolean","number"];var l={required:false,type:"string",disableable:false};var getEnvVar=function(s){var i=process.env["INPUT_".concat(s.replace(/ /g,"_").toUpperCase())];var r=process.env[s];return i||r||undefined};var parseArray=function(s){var i=s.split("\n").join(",").split(",");var r=i.filter((function(s){return s}));return r.map((function(s){return s.trim()}))};var parseBoolean=function(s){var i=["true","True","TRUE"];var r=["false","False","FALSE"];if(i.includes(s))return true;if(r.includes(s))return false;throw new Error("boolean input has to be one of `true | True | TRUE | false | False | FALSE`")};var parseNumber=function(s){var i=Number(s);if(isNaN(i))throw new Error("input has to be a valid number");return i};var parseValue=function(s,i){if(i==="array"){return parseArray(s)}if(i==="boolean"){return parseBoolean(s)}if(i==="number"){return parseNumber(s)}return s.trim()};var getInput=function(s,i){var r;if(typeof s==="string"||Array.isArray(s)){r=n({key:s},i)}else if(typeof s==="object"){r=s}else{throw new Error("No key for input specified")}if(!r.key)throw new Error("No key for input specified");var o=Object.assign({},l,r);if(h.includes(o.type)===false)throw new Error("option type has to be one of `string | array | boolean | number`");var a=typeof o.key==="string"?getEnvVar(o.key):o.key.map((function(s){return getEnvVar(s)})).filter((function(s){return s}))[0];if(o.disableable&&a==="false")return undefined;var c=a!==undefined?parseValue(a,o.type):undefined;if(c===undefined){if(o.required)throw new Error("Input `".concat(o.key,"` is required but was not provided."));if(o.default!==undefined)return o.default;return undefined}if(o.modifier)return o.modifier(c);return c};i.getInput=getInput;s.exports.getInput=i.getInput},419:s=>{s.exports=balanced;function balanced(s,i,r){if(s instanceof RegExp)s=maybeMatch(s,r);if(i instanceof RegExp)i=maybeMatch(i,r);var n=range(s,i,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+s.length,n[1]),post:r.slice(n[1]+i.length)}}function maybeMatch(s,i){var r=i.match(s);return r?r[0]:null}balanced.range=range;function range(s,i,r){var n,o,a,h,l;var c=r.indexOf(s);var u=r.indexOf(i,c+1);var f=c;if(c>=0&&u>0){if(s===i){return[c,u]}n=[];a=r.length;while(f>=0&&!l){if(f==c){n.push(f);c=r.indexOf(s,f+1)}else if(n.length==1){l=[n.pop(),u]}else{o=n.pop();if(o<a){a=o;h=u}u=r.indexOf(i,f+1)}f=c<u&&c>=0?c:u}if(n.length){l=[a,h]}}return l}},981:(s,i,r)=>{var n=r(419);s.exports=expandTop;var o="\0SLASH"+Math.random()+"\0";var a="\0OPEN"+Math.random()+"\0";var h="\0CLOSE"+Math.random()+"\0";var l="\0COMMA"+Math.random()+"\0";var c="\0PERIOD"+Math.random()+"\0";function numeric(s){return parseInt(s,10)==s?parseInt(s,10):s.charCodeAt(0)}function escapeBraces(s){return s.split("\\\\").join(o).split("\\{").join(a).split("\\}").join(h).split("\\,").join(l).split("\\.").join(c)}function unescapeBraces(s){return s.split(o).join("\\").split(a).join("{").split(h).join("}").split(l).join(",").split(c).join(".")}function parseCommaParts(s){if(!s)return[""];var i=[];var r=n("{","}",s);if(!r)return s.split(",");var o=r.pre;var a=r.body;var h=r.post;var l=o.split(",");l[l.length-1]+="{"+a+"}";var c=parseCommaParts(h);if(h.length){l[l.length-1]+=c.shift();l.push.apply(l,c)}i.push.apply(i,l);return i}function expandTop(s){if(!s)return[];if(s.substr(0,2)==="{}"){s="\\{\\}"+s.substr(2)}return expand(escapeBraces(s),true).map(unescapeBraces)}function embrace(s){return"{"+s+"}"}function isPadded(s){return/^-?0\d/.test(s)}function lte(s,i){return s<=i}function gte(s,i){return s>=i}function expand(s,i){var r=[];var o=n("{","}",s);if(!o)return[s];var a=o.pre;var l=o.post.length?expand(o.post,false):[""];if(/\$$/.test(o.pre)){for(var c=0;c<l.length;c++){var u=a+"{"+o.body+"}"+l[c];r.push(u)}}else{var f=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var p=f||d;var g=o.body.indexOf(",")>=0;if(!p&&!g){if(o.post.match(/,.*\}/)){s=o.pre+"{"+o.body+h+o.post;return expand(s)}return[s]}var y;if(p){y=o.body.split(/\.\./)}else{y=parseCommaParts(o.body);if(y.length===1){y=expand(y[0],false).map(embrace);if(y.length===1){return l.map((function(s){return o.pre+y[0]+s}))}}}var w;if(p){var v=numeric(y[0]);var b=numeric(y[1]);var S=Math.max(y[0].length,y[1].length);var _=y.length==3?Math.abs(numeric(y[2])):1;var k=lte;var x=b<v;if(x){_*=-1;k=gte}var C=y.some(isPadded);w=[];for(var E=v;k(E,b);E+=_){var O;if(d){O=String.fromCharCode(E);if(O==="\\")O=""}else{O=String(E);if(C){var P=S-O.length;if(P>0){var T=new Array(P+1).join("0");if(E<0)O="-"+T+O.slice(1);else O=T+O}}}w.push(O)}}else{w=[];for(var R=0;R<y.length;R++){w.push.apply(w,expand(y[R],false))}}for(var R=0;R<w.length;R++){for(var c=0;c<l.length;c++){var u=a+w[R]+l[c];if(!i||p||u)r.push(u)}}}return r}},950:(s,i,r)=>{const n=r(147);const o=r(822);function log(s){console.log(`[dotenv][DEBUG] ${s}`)}const a="\n";const h=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/;const l=/\\n/g;const c=/\n|\r|\r\n/;function parse(s,i){const r=Boolean(i&&i.debug);const n={};s.toString().split(c).forEach((function(s,i){const o=s.match(h);if(o!=null){const s=o[1];let i=o[2]||"";const r=i.length-1;const h=i[0]==='"'&&i[r]==='"';const c=i[0]==="'"&&i[r]==="'";if(c||h){i=i.substring(1,r);if(h){i=i.replace(l,a)}}else{i=i.trim()}n[s]=i}else if(r){log(`did not match key and value when parsing line ${i+1}: ${s}`)}}));return n}function config(s){let i=o.resolve(process.cwd(),".env");let r="utf8";let a=false;if(s){if(s.path!=null){i=s.path}if(s.encoding!=null){r=s.encoding}if(s.debug!=null){a=true}}try{const s=parse(n.readFileSync(i,{encoding:r}),{debug:a});Object.keys(s).forEach((function(i){if(!Object.prototype.hasOwnProperty.call(process.env,i)){process.env[i]=s[i]}else if(a){log(`"${i}" is already defined in \`process.env\` and will not be overwritten`)}}));return{parsed:s}}catch(s){return{error:s}}}s.exports.config=config;s.exports.parse=parse},225:(s,i,r)=>{s.exports=r(30)},30:(s,i,r)=>{var n=r(808);var o=r(404);var a=r(685);var h=r(687);var l=r(361);var c=r(491);var u=r(837);i.httpOverHttp=httpOverHttp;i.httpsOverHttp=httpsOverHttp;i.httpOverHttps=httpOverHttps;i.httpsOverHttps=httpsOverHttps;function httpOverHttp(s){var i=new TunnelingAgent(s);i.request=a.request;return i}function httpsOverHttp(s){var i=new TunnelingAgent(s);i.request=a.request;i.createSocket=createSecureSocket;i.defaultPort=443;return i}function httpOverHttps(s){var i=new TunnelingAgent(s);i.request=h.request;return i}function httpsOverHttps(s){var i=new TunnelingAgent(s);i.request=h.request;i.createSocket=createSecureSocket;i.defaultPort=443;return i}function TunnelingAgent(s){var i=this;i.options=s||{};i.proxyOptions=i.options.proxy||{};i.maxSockets=i.options.maxSockets||a.Agent.defaultMaxSockets;i.requests=[];i.sockets=[];i.on("free",(function onFree(s,r,n,o){var a=toOptions(r,n,o);for(var h=0,l=i.requests.length;h<l;++h){var c=i.requests[h];if(c.host===a.host&&c.port===a.port){i.requests.splice(h,1);c.request.onSocket(s);return}}s.destroy();i.removeSocket(s)}))}u.inherits(TunnelingAgent,l.EventEmitter);TunnelingAgent.prototype.addRequest=function addRequest(s,i,r,n){var o=this;var a=mergeOptions({request:s},o.options,toOptions(i,r,n));if(o.sockets.length>=this.maxSockets){o.requests.push(a);return}o.createSocket(a,(function(i){i.on("free",onFree);i.on("close",onCloseOrRemove);i.on("agentRemove",onCloseOrRemove);s.onSocket(i);function onFree(){o.emit("free",i,a)}function onCloseOrRemove(s){o.removeSocket(i);i.removeListener("free",onFree);i.removeListener("close",onCloseOrRemove);i.removeListener("agentRemove",onCloseOrRemove)}}))};TunnelingAgent.prototype.createSocket=function createSocket(s,i){var r=this;var n={};r.sockets.push(n);var o=mergeOptions({},r.proxyOptions,{method:"CONNECT",path:s.host+":"+s.port,agent:false,headers:{host:s.host+":"+s.port}});if(s.localAddress){o.localAddress=s.localAddress}if(o.proxyAuth){o.headers=o.headers||{};o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")}f("making CONNECT request");var a=r.request(o);a.useChunkedEncodingByDefault=false;a.once("response",onResponse);a.once("upgrade",onUpgrade);a.once("connect",onConnect);a.once("error",onError);a.end();function onResponse(s){s.upgrade=true}function onUpgrade(s,i,r){process.nextTick((function(){onConnect(s,i,r)}))}function onConnect(o,h,l){a.removeAllListeners();h.removeAllListeners();if(o.statusCode!==200){f("tunneling socket could not be established, statusCode=%d",o.statusCode);h.destroy();var c=new Error("tunneling socket could not be established, "+"statusCode="+o.statusCode);c.code="ECONNRESET";s.request.emit("error",c);r.removeSocket(n);return}if(l.length>0){f("got illegal response body from proxy");h.destroy();var c=new Error("got illegal response body from proxy");c.code="ECONNRESET";s.request.emit("error",c);r.removeSocket(n);return}f("tunneling connection has established");r.sockets[r.sockets.indexOf(n)]=h;return i(h)}function onError(i){a.removeAllListeners();f("tunneling socket could not be established, cause=%s\n",i.message,i.stack);var o=new Error("tunneling socket could not be established, "+"cause="+i.message);o.code="ECONNRESET";s.request.emit("error",o);r.removeSocket(n)}};TunnelingAgent.prototype.removeSocket=function removeSocket(s){var i=this.sockets.indexOf(s);if(i===-1){return}this.sockets.splice(i,1);var r=this.requests.shift();if(r){this.createSocket(r,(function(s){r.request.onSocket(s)}))}};function createSecureSocket(s,i){var r=this;TunnelingAgent.prototype.createSocket.call(r,s,(function(n){var a=s.request.getHeader("host");var h=mergeOptions({},r.options,{socket:n,servername:a?a.replace(/:.*$/,""):s.host});var l=o.connect(0,h);r.sockets[r.sockets.indexOf(n)]=l;i(l)}))}function toOptions(s,i,r){if(typeof s==="string"){return{host:s,port:i,localAddress:r}}return s}function mergeOptions(s){for(var i=1,r=arguments.length;i<r;++i){var n=arguments[i];if(typeof n==="object"){var o=Object.keys(n);for(var a=0,h=o.length;a<h;++a){var l=o[a];if(n[l]!==undefined){s[l]=n[l]}}}}return s}var f;if(process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)){f=function(){var s=Array.prototype.slice.call(arguments);if(typeof s[0]==="string"){s[0]="TUNNEL: "+s[0]}else{s.unshift("TUNNEL:")}console.error.apply(console,s)}}else{f=function(){}}i.debug=f},338:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});Object.defineProperty(i,"v1",{enumerable:true,get:function(){return n.default}});Object.defineProperty(i,"v3",{enumerable:true,get:function(){return o.default}});Object.defineProperty(i,"v4",{enumerable:true,get:function(){return a.default}});Object.defineProperty(i,"v5",{enumerable:true,get:function(){return h.default}});Object.defineProperty(i,"NIL",{enumerable:true,get:function(){return l.default}});Object.defineProperty(i,"version",{enumerable:true,get:function(){return c.default}});Object.defineProperty(i,"validate",{enumerable:true,get:function(){return u.default}});Object.defineProperty(i,"stringify",{enumerable:true,get:function(){return f.default}});Object.defineProperty(i,"parse",{enumerable:true,get:function(){return d.default}});var n=_interopRequireDefault(r(101));var o=_interopRequireDefault(r(456));var a=_interopRequireDefault(r(71));var h=_interopRequireDefault(r(57));var l=_interopRequireDefault(r(448));var c=_interopRequireDefault(r(530));var u=_interopRequireDefault(r(324));var f=_interopRequireDefault(r(284));var d=_interopRequireDefault(r(787));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}},612:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(113));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function md5(s){if(Array.isArray(s)){s=Buffer.from(s)}else if(typeof s==="string"){s=Buffer.from(s,"utf8")}return n.default.createHash("md5").update(s).digest()}var o=md5;i["default"]=o},448:(s,i)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var r="00000000-0000-0000-0000-000000000000";i["default"]=r},787:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(324));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function parse(s){if(!(0,n.default)(s)){throw TypeError("Invalid UUID")}let i;const r=new Uint8Array(16);r[0]=(i=parseInt(s.slice(0,8),16))>>>24;r[1]=i>>>16&255;r[2]=i>>>8&255;r[3]=i&255;r[4]=(i=parseInt(s.slice(9,13),16))>>>8;r[5]=i&255;r[6]=(i=parseInt(s.slice(14,18),16))>>>8;r[7]=i&255;r[8]=(i=parseInt(s.slice(19,23),16))>>>8;r[9]=i&255;r[10]=(i=parseInt(s.slice(24,36),16))/1099511627776&255;r[11]=i/4294967296&255;r[12]=i>>>24&255;r[13]=i>>>16&255;r[14]=i>>>8&255;r[15]=i&255;return r}var o=parse;i["default"]=o},610:(s,i)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;i["default"]=r},750:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=rng;var n=_interopRequireDefault(r(113));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}const o=new Uint8Array(256);let a=o.length;function rng(){if(a>o.length-16){n.default.randomFillSync(o);a=0}return o.slice(a,a+=16)}},920:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(113));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function sha1(s){if(Array.isArray(s)){s=Buffer.from(s)}else if(typeof s==="string"){s=Buffer.from(s,"utf8")}return n.default.createHash("sha1").update(s).digest()}var o=sha1;i["default"]=o},284:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(324));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}const o=[];for(let s=0;s<256;++s){o.push((s+256).toString(16).substr(1))}function stringify(s,i=0){const r=(o[s[i+0]]+o[s[i+1]]+o[s[i+2]]+o[s[i+3]]+"-"+o[s[i+4]]+o[s[i+5]]+"-"+o[s[i+6]]+o[s[i+7]]+"-"+o[s[i+8]]+o[s[i+9]]+"-"+o[s[i+10]]+o[s[i+11]]+o[s[i+12]]+o[s[i+13]]+o[s[i+14]]+o[s[i+15]]).toLowerCase();if(!(0,n.default)(r)){throw TypeError("Stringified UUID is invalid")}return r}var a=stringify;i["default"]=a},101:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(750));var o=_interopRequireDefault(r(284));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}let a;let h;let l=0;let c=0;function v1(s,i,r){let u=i&&r||0;const f=i||new Array(16);s=s||{};let d=s.node||a;let p=s.clockseq!==undefined?s.clockseq:h;if(d==null||p==null){const i=s.random||(s.rng||n.default)();if(d==null){d=a=[i[0]|1,i[1],i[2],i[3],i[4],i[5]]}if(p==null){p=h=(i[6]<<8|i[7])&16383}}let g=s.msecs!==undefined?s.msecs:Date.now();let y=s.nsecs!==undefined?s.nsecs:c+1;const w=g-l+(y-c)/1e4;if(w<0&&s.clockseq===undefined){p=p+1&16383}if((w<0||g>l)&&s.nsecs===undefined){y=0}if(y>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}l=g;c=y;h=p;g+=122192928e5;const v=((g&268435455)*1e4+y)%4294967296;f[u++]=v>>>24&255;f[u++]=v>>>16&255;f[u++]=v>>>8&255;f[u++]=v&255;const b=g/4294967296*1e4&268435455;f[u++]=b>>>8&255;f[u++]=b&255;f[u++]=b>>>24&15|16;f[u++]=b>>>16&255;f[u++]=p>>>8|128;f[u++]=p&255;for(let s=0;s<6;++s){f[u+s]=d[s]}return i||(0,o.default)(f)}var u=v1;i["default"]=u},456:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(390));var o=_interopRequireDefault(r(612));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}const a=(0,n.default)("v3",48,o.default);var h=a;i["default"]=h},390:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=_default;i.URL=i.DNS=void 0;var n=_interopRequireDefault(r(284));var o=_interopRequireDefault(r(787));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function stringToBytes(s){s=unescape(encodeURIComponent(s));const i=[];for(let r=0;r<s.length;++r){i.push(s.charCodeAt(r))}return i}const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";i.DNS=a;const h="6ba7b811-9dad-11d1-80b4-00c04fd430c8";i.URL=h;function _default(s,i,r){function generateUUID(s,a,h,l){if(typeof s==="string"){s=stringToBytes(s)}if(typeof a==="string"){a=(0,o.default)(a)}if(a.length!==16){throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)")}let c=new Uint8Array(16+s.length);c.set(a);c.set(s,a.length);c=r(c);c[6]=c[6]&15|i;c[8]=c[8]&63|128;if(h){l=l||0;for(let s=0;s<16;++s){h[l+s]=c[s]}return h}return(0,n.default)(c)}try{generateUUID.name=s}catch(s){}generateUUID.DNS=a;generateUUID.URL=h;return generateUUID}},71:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(750));var o=_interopRequireDefault(r(284));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function v4(s,i,r){s=s||{};const a=s.random||(s.rng||n.default)();a[6]=a[6]&15|64;a[8]=a[8]&63|128;if(i){r=r||0;for(let s=0;s<16;++s){i[r+s]=a[s]}return i}return(0,o.default)(a)}var a=v4;i["default"]=a},57:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(390));var o=_interopRequireDefault(r(920));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}const a=(0,n.default)("v5",80,o.default);var h=a;i["default"]=h},324:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(610));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function validate(s){return typeof s==="string"&&n.default.test(s)}var o=validate;i["default"]=o},530:(s,i,r)=>{Object.defineProperty(i,"__esModule",{value:true});i["default"]=void 0;var n=_interopRequireDefault(r(324));function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}function version(s){if(!(0,n.default)(s)){throw TypeError("Invalid UUID")}return parseInt(s.substr(14,1),16)}var o=version;i["default"]=o},491:i=>{i.exports=s(import.meta.url)("assert")},113:i=>{i.exports=s(import.meta.url)("crypto")},361:i=>{i.exports=s(import.meta.url)("events")},147:i=>{i.exports=s(import.meta.url)("fs")},685:i=>{i.exports=s(import.meta.url)("http")},687:i=>{i.exports=s(import.meta.url)("https")},808:i=>{i.exports=s(import.meta.url)("net")},37:i=>{i.exports=s(import.meta.url)("os")},822:i=>{i.exports=s(import.meta.url)("path")},404:i=>{i.exports=s(import.meta.url)("tls")},837:i=>{i.exports=s(import.meta.url)("util")}};var r={};function __nccwpck_require__(s){var n=r[s];if(n!==undefined){return n.exports}var o=r[s]={exports:{}};var a=true;try{i[s].call(o.exports,o,o.exports,__nccwpck_require__);a=false}finally{if(a)delete r[s]}return o.exports}(()=>{__nccwpck_require__.n=s=>{var i=s&&s.__esModule?()=>s["default"]:()=>s;__nccwpck_require__.d(i,{a:i});return i}})();(()=>{var s=Object.getPrototypeOf?s=>Object.getPrototypeOf(s):s=>s.__proto__;var i;__nccwpck_require__.t=function(r,n){if(n&1)r=this(r);if(n&8)return r;if(typeof r==="object"&&r){if(n&4&&r.__esModule)return r;if(n&16&&typeof r.then==="function")return r}var o=Object.create(null);__nccwpck_require__.r(o);var a={};i=i||[null,s({}),s([]),s(s)];for(var h=n&2&&r;typeof h=="object"&&!~i.indexOf(h);h=s(h)){Object.getOwnPropertyNames(h).forEach((s=>a[s]=()=>r[s]))}a["default"]=()=>r;__nccwpck_require__.d(o,a);return o}})();(()=>{__nccwpck_require__.d=(s,i)=>{for(var r in i){if(__nccwpck_require__.o(i,r)&&!__nccwpck_require__.o(s,r)){Object.defineProperty(s,r,{enumerable:true,get:i[r]})}}}})();(()=>{__nccwpck_require__.o=(s,i)=>Object.prototype.hasOwnProperty.call(s,i)})();(()=>{__nccwpck_require__.r=s=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(s,"__esModule",{value:true})}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=new URL(".",import.meta.url).pathname.slice(import.meta.url.match(/^file:\/\/\/\w:/)?1:0,-1)+"/";var n={};(()=>{var i=__nccwpck_require__(93);var r=__nccwpck_require__(665);const n=s(import.meta.url)("fs/promises");var o=__nccwpck_require__(981);const a=1024*64;const assertValidPattern=s=>{if(typeof s!=="string"){throw new TypeError("invalid pattern")}if(s.length>a){throw new TypeError("pattern is too long")}};const h={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",true],"[:alpha:]":["\\p{L}\\p{Nl}",true],"[:ascii:]":["\\x"+"00-\\x"+"7f",false],"[:blank:]":["\\p{Zs}\\t",true],"[:cntrl:]":["\\p{Cc}",true],"[:digit:]":["\\p{Nd}",true],"[:graph:]":["\\p{Z}\\p{C}",true,true],"[:lower:]":["\\p{Ll}",true],"[:print:]":["\\p{C}",true],"[:punct:]":["\\p{P}",true],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",true],"[:upper:]":["\\p{Lu}",true],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",true],"[:xdigit:]":["A-Fa-f0-9",false]};const braceEscape=s=>s.replace(/[[\]\\-]/g,"\\$&");const regexpEscape=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const rangesToString=s=>s.join("");const parseClass=(s,i)=>{const r=i;if(s.charAt(r)!=="["){throw new Error("not in a brace expression")}const n=[];const o=[];let a=r+1;let l=false;let c=false;let u=false;let f=false;let d=r;let p="";t:while(a<s.length){const i=s.charAt(a);if((i==="!"||i==="^")&&a===r+1){f=true;a++;continue}if(i==="]"&&l&&!u){d=a+1;break}l=true;if(i==="\\"){if(!u){u=true;a++;continue}}if(i==="["&&!u){for(const[i,[l,u,f]]of Object.entries(h)){if(s.startsWith(i,a)){if(p){return["$.",false,s.length-r,true]}a+=i.length;if(f)o.push(l);else n.push(l);c=c||u;continue t}}}u=false;if(p){if(i>p){n.push(braceEscape(p)+"-"+braceEscape(i))}else if(i===p){n.push(braceEscape(i))}p="";a++;continue}if(s.startsWith("-]",a+1)){n.push(braceEscape(i+"-"));a+=2;continue}if(s.startsWith("-",a+1)){p=i;a+=2;continue}n.push(braceEscape(i));a++}if(d<a){return["",false,0,false]}if(!n.length&&!o.length){return["$.",false,s.length-r,true]}if(o.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!f){const s=n[0].length===2?n[0].slice(-1):n[0];return[regexpEscape(s),false,d-r,false]}const g="["+(f?"^":"")+rangesToString(n)+"]";const y="["+(f?"":"^")+rangesToString(o)+"]";const w=n.length&&o.length?"("+g+"|"+y+")":n.length?g:y;return[w,c,d-r,true]};const unescape_unescape=(s,{windowsPathsNoEscape:i=false}={})=>i?s.replace(/\[([^\/\\])\]/g,"$1"):s.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");const l=new Set(["!","?","+","*","@"]);const isExtglobType=s=>l.has(s);const c="(?!(?:^|/)\\.\\.?(?:$|/))";const u="(?!\\.)";const f=new Set(["[","."]);const d=new Set(["..","."]);const p=new Set("().*{}+?[]^$\\!");const regExpEscape=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");const g="[^/]";const y=g+"*?";const w=g+"+?";class AST{type;#t;#e;#s=false;#i=[];#r;#n;#o;#a=false;#h;#l;#c=false;constructor(s,i,r={}){this.type=s;if(s)this.#e=true;this.#r=i;this.#t=this.#r?this.#r.#t:this;this.#h=this.#t===this?r:this.#t.#h;this.#o=this.#t===this?[]:this.#t.#o;if(s==="!"&&!this.#t.#a)this.#o.push(this);this.#n=this.#r?this.#r.#i.length:0}get hasMagic(){if(this.#e!==undefined)return this.#e;for(const s of this.#i){if(typeof s==="string")continue;if(s.type||s.hasMagic)return this.#e=true}return this.#e}toString(){if(this.#l!==undefined)return this.#l;if(!this.type){return this.#l=this.#i.map((s=>String(s))).join("")}else{return this.#l=this.type+"("+this.#i.map((s=>String(s))).join("|")+")"}}#u(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;this.toString();this.#a=true;let s;while(s=this.#o.pop()){if(s.type!=="!")continue;let i=s;let r=i.#r;while(r){for(let n=i.#n+1;!r.type&&n<r.#i.length;n++){for(const i of s.#i){if(typeof i==="string"){throw new Error("string part in extglob AST??")}i.copyIn(r.#i[n])}}i=r;r=i.#r}}return this}push(...s){for(const i of s){if(i==="")continue;if(typeof i!=="string"&&!(i instanceof AST&&i.#r===this)){throw new Error("invalid part: "+i)}this.#i.push(i)}}toJSON(){const s=this.type===null?this.#i.slice().map((s=>typeof s==="string"?s:s.toJSON())):[this.type,...this.#i.map((s=>s.toJSON()))];if(this.isStart()&&!this.type)s.unshift([]);if(this.isEnd()&&(this===this.#t||this.#t.#a&&this.#r?.type==="!")){s.push({})}return s}isStart(){if(this.#t===this)return true;if(!this.#r?.isStart())return false;if(this.#n===0)return true;const s=this.#r;for(let i=0;i<this.#n;i++){const r=s.#i[i];if(!(r instanceof AST&&r.type==="!")){return false}}return true}isEnd(){if(this.#t===this)return true;if(this.#r?.type==="!")return true;if(!this.#r?.isEnd())return false;if(!this.type)return this.#r?.isEnd();const s=this.#r?this.#r.#i.length:0;return this.#n===s-1}copyIn(s){if(typeof s==="string")this.push(s);else this.push(s.clone(this))}clone(s){const i=new AST(this.type,s);for(const s of this.#i){i.copyIn(s)}return i}static#f(s,i,r,n){let o=false;let a=false;let h=-1;let l=false;if(i.type===null){let c=r;let u="";while(c<s.length){const r=s.charAt(c++);if(o||r==="\\"){o=!o;u+=r;continue}if(a){if(c===h+1){if(r==="^"||r==="!"){l=true}}else if(r==="]"&&!(c===h+2&&l)){a=false}u+=r;continue}else if(r==="["){a=true;h=c;l=false;u+=r;continue}if(!n.noext&&isExtglobType(r)&&s.charAt(c)==="("){i.push(u);u="";const o=new AST(r,i);c=AST.#f(s,o,c,n);i.push(o);continue}u+=r}i.push(u);return c}let c=r+1;let u=new AST(null,i);const f=[];let d="";while(c<s.length){const r=s.charAt(c++);if(o||r==="\\"){o=!o;d+=r;continue}if(a){if(c===h+1){if(r==="^"||r==="!"){l=true}}else if(r==="]"&&!(c===h+2&&l)){a=false}d+=r;continue}else if(r==="["){a=true;h=c;l=false;d+=r;continue}if(isExtglobType(r)&&s.charAt(c)==="("){u.push(d);d="";const i=new AST(r,u);u.push(i);c=AST.#f(s,i,c,n);continue}if(r==="|"){u.push(d);d="";f.push(u);u=new AST(null,i);continue}if(r===")"){if(d===""&&i.#i.length===0){i.#c=true}u.push(d);d="";i.push(...f,u);return c}d+=r}i.type=null;i.#e=undefined;i.#i=[s.substring(r-1)];return c}static fromGlob(s,i={}){const r=new AST(null,undefined,i);AST.#f(s,r,0,i);return r}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const s=this.toString();const[i,r,n,o]=this.toRegExpSource();const a=n||this.#e||this.#h.nocase&&!this.#h.nocaseMagicOnly&&s.toUpperCase()!==s.toLowerCase();if(!a){return r}const h=(this.#h.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${i}$`,h),{_src:i,_glob:s})}get options(){return this.#h}toRegExpSource(s){const i=s??!!this.#h.dot;if(this.#t===this)this.#u();if(!this.type){const r=this.isStart()&&this.isEnd();const n=this.#i.map((i=>{const[n,o,a,h]=typeof i==="string"?AST.#d(i,this.#e,r):i.toRegExpSource(s);this.#e=this.#e||a;this.#s=this.#s||h;return n})).join("");let o="";if(this.isStart()){if(typeof this.#i[0]==="string"){const r=this.#i.length===1&&d.has(this.#i[0]);if(!r){const r=f;const a=i&&r.has(n.charAt(0))||n.startsWith("\\.")&&r.has(n.charAt(2))||n.startsWith("\\.\\.")&&r.has(n.charAt(4));const h=!i&&!s&&r.has(n.charAt(0));o=a?c:h?u:""}}}let a="";if(this.isEnd()&&this.#t.#a&&this.#r?.type==="!"){a="(?:$|\\/)"}const h=o+n+a;return[h,unescape_unescape(n),this.#e=!!this.#e,this.#s]}const r=this.type==="*"||this.type==="+";const n=this.type==="!"?"(?:(?!(?:":"(?:";let o=this.#p(i);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){const s=this.toString();this.#i=[s];this.type=null;this.#e=undefined;return[s,unescape_unescape(this.toString()),false,false]}let a=!r||s||i||!u?"":this.#p(true);if(a===o){a=""}if(a){o=`(?:${o})(?:${a})*?`}let h="";if(this.type==="!"&&this.#c){h=(this.isStart()&&!i?u:"")+w}else{const r=this.type==="!"?"))"+(this.isStart()&&!i&&!s?u:"")+y+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?`)?`:`)${this.type}`;h=n+o+r}return[h,unescape_unescape(o),this.#e=!!this.#e,this.#s]}#p(s){return this.#i.map((i=>{if(typeof i==="string"){throw new Error("string type in extglob ast??")}const[r,n,o,a]=i.toRegExpSource(s);this.#s=this.#s||a;return r})).filter((s=>!(this.isStart()&&this.isEnd())||!!s)).join("|")}static#d(s,i,r=false){let n=false;let o="";let a=false;for(let h=0;h<s.length;h++){const l=s.charAt(h);if(n){n=false;o+=(p.has(l)?"\\":"")+l;continue}if(l==="\\"){if(h===s.length-1){o+="\\\\"}else{n=true}continue}if(l==="["){const[r,n,l,c]=parseClass(s,h);if(l){o+=r;a=a||n;h+=l-1;i=i||c;continue}}if(l==="*"){if(r&&s==="*")o+=w;else o+=y;i=true;continue}if(l==="?"){o+=g;i=true;continue}o+=regExpEscape(l)}return[o,unescape_unescape(s),!!i,a]}}const escape_escape=(s,{windowsPathsNoEscape:i=false}={})=>i?s.replace(/[?*()[\]]/g,"[$&]"):s.replace(/[?*()[\]\\]/g,"\\$&");const minimatch=(s,i,r={})=>{assertValidPattern(i);if(!r.nocomment&&i.charAt(0)==="#"){return false}return new Minimatch(i,r).match(s)};const v=/^\*+([^+@!?\*\[\(]*)$/;const starDotExtTest=s=>i=>!i.startsWith(".")&&i.endsWith(s);const starDotExtTestDot=s=>i=>i.endsWith(s);const starDotExtTestNocase=s=>{s=s.toLowerCase();return i=>!i.startsWith(".")&&i.toLowerCase().endsWith(s)};const starDotExtTestNocaseDot=s=>{s=s.toLowerCase();return i=>i.toLowerCase().endsWith(s)};const b=/^\*+\.\*+$/;const starDotStarTest=s=>!s.startsWith(".")&&s.includes(".");const starDotStarTestDot=s=>s!=="."&&s!==".."&&s.includes(".");const S=/^\.\*+$/;const dotStarTest=s=>s!=="."&&s!==".."&&s.startsWith(".");const _=/^\*+$/;const starTest=s=>s.length!==0&&!s.startsWith(".");const starTestDot=s=>s.length!==0&&s!=="."&&s!=="..";const k=/^\?+([^+@!?\*\[\(]*)?$/;const qmarksTestNocase=([s,i=""])=>{const r=qmarksTestNoExt([s]);if(!i)return r;i=i.toLowerCase();return s=>r(s)&&s.toLowerCase().endsWith(i)};const qmarksTestNocaseDot=([s,i=""])=>{const r=qmarksTestNoExtDot([s]);if(!i)return r;i=i.toLowerCase();return s=>r(s)&&s.toLowerCase().endsWith(i)};const qmarksTestDot=([s,i=""])=>{const r=qmarksTestNoExtDot([s]);return!i?r:s=>r(s)&&s.endsWith(i)};const qmarksTest=([s,i=""])=>{const r=qmarksTestNoExt([s]);return!i?r:s=>r(s)&&s.endsWith(i)};const qmarksTestNoExt=([s])=>{const i=s.length;return s=>s.length===i&&!s.startsWith(".")};const qmarksTestNoExtDot=([s])=>{const i=s.length;return s=>s.length===i&&s!=="."&&s!==".."};const x=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";const C={win32:{sep:"\\"},posix:{sep:"/"}};const E=x==="win32"?C.win32.sep:C.posix.sep;minimatch.sep=E;const O=Symbol("globstar **");minimatch.GLOBSTAR=O;const P="[^/]";const T=P+"*?";const R="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";const A="(?:(?!(?:\\/|^)\\.).)*?";const filter=(s,i={})=>r=>minimatch(r,s,i);minimatch.filter=filter;const ext=(s,i={})=>Object.assign({},s,i);const defaults=s=>{if(!s||typeof s!=="object"||!Object.keys(s).length){return minimatch}const i=minimatch;const m=(r,n,o={})=>i(r,n,ext(s,o));return Object.assign(m,{Minimatch:class Minimatch extends i.Minimatch{constructor(i,r={}){super(i,ext(s,r))}static defaults(r){return i.defaults(ext(s,r)).Minimatch}},AST:class AST extends i.AST{constructor(i,r,n={}){super(i,r,ext(s,n))}static fromGlob(r,n={}){return i.AST.fromGlob(r,ext(s,n))}},unescape:(r,n={})=>i.unescape(r,ext(s,n)),escape:(r,n={})=>i.escape(r,ext(s,n)),filter:(r,n={})=>i.filter(r,ext(s,n)),defaults:r=>i.defaults(ext(s,r)),makeRe:(r,n={})=>i.makeRe(r,ext(s,n)),braceExpand:(r,n={})=>i.braceExpand(r,ext(s,n)),match:(r,n,o={})=>i.match(r,n,ext(s,o)),sep:i.sep,GLOBSTAR:O})};minimatch.defaults=defaults;const braceExpand=(s,i={})=>{assertValidPattern(s);if(i.nobrace||!/\{(?:(?!\{).)*\}/.test(s)){return[s]}return o(s)};minimatch.braceExpand=braceExpand;const makeRe=(s,i={})=>new Minimatch(s,i).makeRe();minimatch.makeRe=makeRe;const match=(s,i,r={})=>{const n=new Minimatch(i,r);s=s.filter((s=>n.match(s)));if(n.options.nonull&&!s.length){s.push(i)}return s};minimatch.match=match;const L=/[?*]|[+@!]\(.*?\)|\[|\]/;const esm_regExpEscape=s=>s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class Minimatch{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(s,i={}){assertValidPattern(s);i=i||{};this.options=i;this.pattern=s;this.platform=i.platform||x;this.isWindows=this.platform==="win32";this.windowsPathsNoEscape=!!i.windowsPathsNoEscape||i.allowWindowsEscape===false;if(this.windowsPathsNoEscape){this.pattern=this.pattern.replace(/\\/g,"/")}this.preserveMultipleSlashes=!!i.preserveMultipleSlashes;this.regexp=null;this.negate=false;this.nonegate=!!i.nonegate;this.comment=false;this.empty=false;this.partial=!!i.partial;this.nocase=!!this.options.nocase;this.windowsNoMagicRoot=i.windowsNoMagicRoot!==undefined?i.windowsNoMagicRoot:!!(this.isWindows&&this.nocase);this.globSet=[];this.globParts=[];this.set=[];this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1){return true}for(const s of this.set){for(const i of s){if(typeof i!=="string")return true}}return false}debug(...s){}make(){const s=this.pattern;const i=this.options;if(!i.nocomment&&s.charAt(0)==="#"){this.comment=true;return}if(!s){this.empty=true;return}this.parseNegate();this.globSet=[...new Set(this.braceExpand())];if(i.debug){this.debug=(...s)=>console.error(...s)}this.debug(this.pattern,this.globSet);const r=this.globSet.map((s=>this.slashSplit(s)));this.globParts=this.preprocess(r);this.debug(this.pattern,this.globParts);let n=this.globParts.map(((s,i,r)=>{if(this.isWindows&&this.windowsNoMagicRoot){const i=s[0]===""&&s[1]===""&&(s[2]==="?"||!L.test(s[2]))&&!L.test(s[3]);const r=/^[a-z]:/i.test(s[0]);if(i){return[...s.slice(0,4),...s.slice(4).map((s=>this.parse(s)))]}else if(r){return[s[0],...s.slice(1).map((s=>this.parse(s)))]}}return s.map((s=>this.parse(s)))}));this.debug(this.pattern,n);this.set=n.filter((s=>s.indexOf(false)===-1));if(this.isWindows){for(let s=0;s<this.set.length;s++){const i=this.set[s];if(i[0]===""&&i[1]===""&&this.globParts[s][2]==="?"&&typeof i[3]==="string"&&/^[a-z]:$/i.test(i[3])){i[2]="?"}}}this.debug(this.pattern,this.set)}preprocess(s){if(this.options.noglobstar){for(let i=0;i<s.length;i++){for(let r=0;r<s[i].length;r++){if(s[i][r]==="**"){s[i][r]="*"}}}}const{optimizationLevel:i=1}=this.options;if(i>=2){s=this.firstPhasePreProcess(s);s=this.secondPhasePreProcess(s)}else if(i>=1){s=this.levelOneOptimize(s)}else{s=this.adjascentGlobstarOptimize(s)}return s}adjascentGlobstarOptimize(s){return s.map((s=>{let i=-1;while(-1!==(i=s.indexOf("**",i+1))){let r=i;while(s[r+1]==="**"){r++}if(r!==i){s.splice(i,r-i)}}return s}))}levelOneOptimize(s){return s.map((s=>{s=s.reduce(((s,i)=>{const r=s[s.length-1];if(i==="**"&&r==="**"){return s}if(i===".."){if(r&&r!==".."&&r!=="."&&r!=="**"){s.pop();return s}}s.push(i);return s}),[]);return s.length===0?[""]:s}))}levelTwoFileOptimize(s){if(!Array.isArray(s)){s=this.slashSplit(s)}let i=false;do{i=false;if(!this.preserveMultipleSlashes){for(let r=1;r<s.length-1;r++){const n=s[r];if(r===1&&n===""&&s[0]==="")continue;if(n==="."||n===""){i=true;s.splice(r,1);r--}}if(s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")){i=true;s.pop()}}let r=0;while(-1!==(r=s.indexOf("..",r+1))){const n=s[r-1];if(n&&n!=="."&&n!==".."&&n!=="**"){i=true;s.splice(r-1,2);r-=2}}}while(i);return s.length===0?[""]:s}firstPhasePreProcess(s){let i=false;do{i=false;for(let r of s){let n=-1;while(-1!==(n=r.indexOf("**",n+1))){let o=n;while(r[o+1]==="**"){o++}if(o>n){r.splice(n+1,o-n)}let a=r[n+1];const h=r[n+2];const l=r[n+3];if(a!=="..")continue;if(!h||h==="."||h===".."||!l||l==="."||l===".."){continue}i=true;r.splice(n,1);const c=r.slice(0);c[n]="**";s.push(c);n--}if(!this.preserveMultipleSlashes){for(let s=1;s<r.length-1;s++){const n=r[s];if(s===1&&n===""&&r[0]==="")continue;if(n==="."||n===""){i=true;r.splice(s,1);s--}}if(r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")){i=true;r.pop()}}let o=0;while(-1!==(o=r.indexOf("..",o+1))){const s=r[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){i=true;const s=o===1&&r[o+1]==="**";const n=s?["."]:[];r.splice(o-1,2,...n);if(r.length===0)r.push("");o-=2}}}}while(i);return s}secondPhasePreProcess(s){for(let i=0;i<s.length-1;i++){for(let r=i+1;r<s.length;r++){const n=this.partsMatch(s[i],s[r],!this.preserveMultipleSlashes);if(!n)continue;s[i]=n;s[r]=[]}}return s.filter((s=>s.length))}partsMatch(s,i,r=false){let n=0;let o=0;let a=[];let h="";while(n<s.length&&o<i.length){if(s[n]===i[o]){a.push(h==="b"?i[o]:s[n]);n++;o++}else if(r&&s[n]==="**"&&i[o]===s[n+1]){a.push(s[n]);n++}else if(r&&i[o]==="**"&&s[n]===i[o+1]){a.push(i[o]);o++}else if(s[n]==="*"&&i[o]&&(this.options.dot||!i[o].startsWith("."))&&i[o]!=="**"){if(h==="b")return false;h="a";a.push(s[n]);n++;o++}else if(i[o]==="*"&&s[n]&&(this.options.dot||!s[n].startsWith("."))&&s[n]!=="**"){if(h==="a")return false;h="b";a.push(i[o]);n++;o++}else{return false}}return s.length===i.length&&a}parseNegate(){if(this.nonegate)return;const s=this.pattern;let i=false;let r=0;for(let n=0;n<s.length&&s.charAt(n)==="!";n++){i=!i;r++}if(r)this.pattern=s.slice(r);this.negate=i}matchOne(s,i,r=false){const n=this.options;if(this.isWindows){const r=typeof s[0]==="string"&&/^[a-z]:$/i.test(s[0]);const n=!r&&s[0]===""&&s[1]===""&&s[2]==="?"&&/^[a-z]:$/i.test(s[3]);const o=typeof i[0]==="string"&&/^[a-z]:$/i.test(i[0]);const a=!o&&i[0]===""&&i[1]===""&&i[2]==="?"&&typeof i[3]==="string"&&/^[a-z]:$/i.test(i[3]);const h=n?3:r?0:undefined;const l=a?3:o?0:undefined;if(typeof h==="number"&&typeof l==="number"){const[r,n]=[s[h],i[l]];if(r.toLowerCase()===n.toLowerCase()){i[l]=r;if(l>h){i=i.slice(l)}else if(h>l){s=s.slice(h)}}}}const{optimizationLevel:o=1}=this.options;if(o>=2){s=this.levelTwoFileOptimize(s)}this.debug("matchOne",this,{file:s,pattern:i});this.debug("matchOne",s.length,i.length);for(var a=0,h=0,l=s.length,c=i.length;a<l&&h<c;a++,h++){this.debug("matchOne loop");var u=i[h];var f=s[a];this.debug(i,u,f);if(u===false){return false}if(u===O){this.debug("GLOBSTAR",[i,u,f]);var d=a;var p=h+1;if(p===c){this.debug("** at the end");for(;a<l;a++){if(s[a]==="."||s[a]===".."||!n.dot&&s[a].charAt(0)===".")return false}return true}while(d<l){var g=s[d];this.debug("\nglobstar while",s,d,i,p,g);if(this.matchOne(s.slice(d),i.slice(p),r)){this.debug("globstar found match!",d,l,g);return true}else{if(g==="."||g===".."||!n.dot&&g.charAt(0)==="."){this.debug("dot detected!",s,d,i,p);break}this.debug("globstar swallow a segment, and continue");d++}}if(r){this.debug("\n>>> no match, partial?",s,d,i,p);if(d===l){return true}}return false}let o;if(typeof u==="string"){o=f===u;this.debug("string match",u,f,o)}else{o=u.test(f);this.debug("pattern match",u,f,o)}if(!o)return false}if(a===l&&h===c){return true}else if(a===l){return r}else if(h===c){return a===l-1&&s[a]===""}else{throw new Error("wtf?")}}braceExpand(){return braceExpand(this.pattern,this.options)}parse(s){assertValidPattern(s);const i=this.options;if(s==="**")return O;if(s==="")return"";let r;let n=null;if(r=s.match(_)){n=i.dot?starTestDot:starTest}else if(r=s.match(v)){n=(i.nocase?i.dot?starDotExtTestNocaseDot:starDotExtTestNocase:i.dot?starDotExtTestDot:starDotExtTest)(r[1])}else if(r=s.match(k)){n=(i.nocase?i.dot?qmarksTestNocaseDot:qmarksTestNocase:i.dot?qmarksTestDot:qmarksTest)(r)}else if(r=s.match(b)){n=i.dot?starDotStarTestDot:starDotStarTest}else if(r=s.match(S)){n=dotStarTest}const o=AST.fromGlob(s,this.options).toMMPattern();if(n&&typeof o==="object"){Reflect.defineProperty(o,"test",{value:n})}return o}makeRe(){if(this.regexp||this.regexp===false)return this.regexp;const s=this.set;if(!s.length){this.regexp=false;return this.regexp}const i=this.options;const r=i.noglobstar?T:i.dot?R:A;const n=new Set(i.nocase?["i"]:[]);let o=s.map((s=>{const i=s.map((s=>{if(s instanceof RegExp){for(const i of s.flags.split(""))n.add(i)}return typeof s==="string"?esm_regExpEscape(s):s===O?O:s._src}));i.forEach(((s,n)=>{const o=i[n+1];const a=i[n-1];if(s!==O||a===O){return}if(a===undefined){if(o!==undefined&&o!==O){i[n+1]="(?:\\/|"+r+"\\/)?"+o}else{i[n]=r}}else if(o===undefined){i[n-1]=a+"(?:\\/|"+r+")?"}else if(o!==O){i[n-1]=a+"(?:\\/|\\/"+r+"\\/)"+o;i[n+1]=O}}));return i.filter((s=>s!==O)).join("/")})).join("|");const[a,h]=s.length>1?["(?:",")"]:["",""];o="^"+a+o+h+"$";if(this.negate)o="^(?!"+o+").+$";try{this.regexp=new RegExp(o,[...n].join(""))}catch(s){this.regexp=false}return this.regexp}slashSplit(s){if(this.preserveMultipleSlashes){return s.split("/")}else if(this.isWindows&&/^\/\/[^\/]+/.test(s)){return["",...s.split(/\/+/)]}else{return s.split(/\/+/)}}match(s,i=this.partial){this.debug("match",s,this.pattern);if(this.comment){return false}if(this.empty){return s===""}if(s==="/"&&i){return true}const r=this.options;if(this.isWindows){s=s.split("\\").join("/")}const n=this.slashSplit(s);this.debug(this.pattern,"split",n);const o=this.set;this.debug(this.pattern,"set",o);let a=n[n.length-1];if(!a){for(let s=n.length-2;!a&&s>=0;s--){a=n[s]}}for(let s=0;s<o.length;s++){const h=o[s];let l=n;if(r.matchBase&&h.length===1){l=[a]}const c=this.matchOne(l,h,i);if(c){if(r.flipNegate){return true}return!this.negate}}if(r.flipNegate){return false}return this.negate}static defaults(s){return minimatch.defaults(s).Minimatch}}minimatch.AST=AST;minimatch.Minimatch=Minimatch;minimatch.escape=escape_escape;minimatch.unescape=unescape_unescape;const M=s(import.meta.url)("node:url");const D=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date;const F=new Set;const j=typeof process==="object"&&!!process?process:{};const emitWarning=(s,i,r,n)=>{typeof j.emitWarning==="function"?j.emitWarning(s,i,r,n):console.error(`[${r}] ${i}: ${s}`)};let N=globalThis.AbortController;let B=globalThis.AbortSignal;if(typeof N==="undefined"){B=class AbortSignal{onabort;_onabort=[];reason;aborted=false;addEventListener(s,i){this._onabort.push(i)}};N=class AbortController{constructor(){warnACPolyfill()}signal=new B;abort(s){if(this.signal.aborted)return;this.signal.reason=s;this.signal.aborted=true;for(const i of this.signal._onabort){i(s)}this.signal.onabort?.(s)}};let s=j.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const warnACPolyfill=()=>{if(!s)return;s=false;emitWarning("AbortController is not defined. If using lru-cache in "+"node 14, load an AbortController polyfill from the "+"`node-abort-controller` package. A minimal polyfill is "+"provided for use by LRUCache.fetch(), but it should not be "+"relied upon in other contexts (eg, passing it to other APIs that "+"use AbortController/AbortSignal might have undesirable effects). "+"You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",warnACPolyfill)}}const shouldWarn=s=>!F.has(s);const I=Symbol("type");const isPosInt=s=>s&&s===Math.floor(s)&&s>0&&isFinite(s);const getUintArray=s=>!isPosInt(s)?null:s<=Math.pow(2,8)?Uint8Array:s<=Math.pow(2,16)?Uint16Array:s<=Math.pow(2,32)?Uint32Array:s<=Number.MAX_SAFE_INTEGER?ZeroArray:null;class ZeroArray extends Array{constructor(s){super(s);this.fill(0)}}class Stack{heap;length;static#g=false;static create(s){const i=getUintArray(s);if(!i)return[];Stack.#g=true;const r=new Stack(s,i);Stack.#g=false;return r}constructor(s,i){if(!Stack.#g){throw new TypeError("instantiate Stack using Stack.create(n)")}this.heap=new i(s);this.length=0}push(s){this.heap[this.length++]=s}pop(){return this.heap[--this.length]}}class LRUCache{#m;#y;#w;#v;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#S;#_;#k;#x;#C;#E;#O;#P;#T;#R;#A;#L;#M;#D;#F;#j;#N;static unsafeExposeInternals(s){return{starts:s.#M,ttls:s.#D,sizes:s.#L,keyMap:s.#k,keyList:s.#x,valList:s.#C,next:s.#E,prev:s.#O,get head(){return s.#P},get tail(){return s.#T},free:s.#R,isBackgroundFetch:i=>s.#B(i),backgroundFetch:(i,r,n,o)=>s.#I(i,r,n,o),moveToTail:i=>s.#U(i),indexes:i=>s.#z(i),rindexes:i=>s.#q(i),isStale:i=>s.#$(i)}}get max(){return this.#m}get maxSize(){return this.#y}get calculatedSize(){return this.#_}get size(){return this.#S}get fetchMethod(){return this.#b}get dispose(){return this.#w}get disposeAfter(){return this.#v}constructor(s){const{max:i=0,ttl:r,ttlResolution:n=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:h,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:f,noUpdateTTL:d,maxSize:p=0,maxEntrySize:g=0,sizeCalculation:y,fetchMethod:w,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:_,ignoreFetchAbort:k}=s;if(i!==0&&!isPosInt(i)){throw new TypeError("max option must be a nonnegative integer")}const x=i?getUintArray(i):Array;if(!x){throw new Error("invalid max value: "+i)}this.#m=i;this.#y=p;this.maxEntrySize=g||this.#y;this.sizeCalculation=y;if(this.sizeCalculation){if(!this.#y&&!this.maxEntrySize){throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize")}if(typeof this.sizeCalculation!=="function"){throw new TypeError("sizeCalculation set to non-function")}}if(w!==undefined&&typeof w!=="function"){throw new TypeError("fetchMethod must be a function if specified")}this.#b=w;this.#j=!!w;this.#k=new Map;this.#x=new Array(i).fill(undefined);this.#C=new Array(i).fill(undefined);this.#E=new x(i);this.#O=new x(i);this.#P=0;this.#T=0;this.#R=Stack.create(i);this.#S=0;this.#_=0;if(typeof c==="function"){this.#w=c}if(typeof u==="function"){this.#v=u;this.#A=[]}else{this.#v=undefined;this.#A=undefined}this.#F=!!this.#w;this.#N=!!this.#v;this.noDisposeOnSet=!!f;this.noUpdateTTL=!!d;this.noDeleteOnFetchRejection=!!v;this.allowStaleOnFetchRejection=!!S;this.allowStaleOnFetchAbort=!!_;this.ignoreFetchAbort=!!k;if(this.maxEntrySize!==0){if(this.#y!==0){if(!isPosInt(this.#y)){throw new TypeError("maxSize must be a positive integer if specified")}}if(!isPosInt(this.maxEntrySize)){throw new TypeError("maxEntrySize must be a positive integer if specified")}this.#W()}this.allowStale=!!l;this.noDeleteOnStaleGet=!!b;this.updateAgeOnGet=!!a;this.updateAgeOnHas=!!h;this.ttlResolution=isPosInt(n)||n===0?n:1;this.ttlAutopurge=!!o;this.ttl=r||0;if(this.ttl){if(!isPosInt(this.ttl)){throw new TypeError("ttl must be a positive integer if specified")}this.#H()}if(this.#m===0&&this.ttl===0&&this.#y===0){throw new TypeError("At least one of max, maxSize, or ttl is required")}if(!this.ttlAutopurge&&!this.#m&&!this.#y){const s="LRU_CACHE_UNBOUNDED";if(shouldWarn(s)){F.add(s);const i="TTL caching without ttlAutopurge, max, or maxSize can "+"result in unbounded memory consumption.";emitWarning(i,"UnboundedCacheWarning",s,LRUCache)}}}getRemainingTTL(s){return this.#k.has(s)?Infinity:0}#H(){const s=new ZeroArray(this.#m);const i=new ZeroArray(this.#m);this.#D=s;this.#M=i;this.#G=(r,n,o=D.now())=>{i[r]=n!==0?o:0;s[r]=n;if(n!==0&&this.ttlAutopurge){const s=setTimeout((()=>{if(this.#$(r)){this.delete(this.#x[r])}}),n+1);if(s.unref){s.unref()}}};this.#V=r=>{i[r]=s[r]!==0?D.now():0};this.#K=(n,o)=>{if(s[o]){const a=s[o];const h=i[o];if(!a||!h)return;n.ttl=a;n.start=h;n.now=r||getNow();const l=n.now-h;n.remainingTTL=a-l}};let r=0;const getNow=()=>{const s=D.now();if(this.ttlResolution>0){r=s;const i=setTimeout((()=>r=0),this.ttlResolution);if(i.unref){i.unref()}}return s};this.getRemainingTTL=n=>{const o=this.#k.get(n);if(o===undefined){return 0}const a=s[o];const h=i[o];if(!a||!h){return Infinity}const l=(r||getNow())-h;return a-l};this.#$=n=>{const o=i[n];const a=s[n];return!!a&&!!o&&(r||getNow())-o>a}}#V=()=>{};#K=()=>{};#G=()=>{};#$=()=>false;#W(){const s=new ZeroArray(this.#m);this.#_=0;this.#L=s;this.#J=i=>{this.#_-=s[i];s[i]=0};this.#Y=(s,i,r,n)=>{if(this.#B(i)){return 0}if(!isPosInt(r)){if(n){if(typeof n!=="function"){throw new TypeError("sizeCalculation must be a function")}r=n(i,s);if(!isPosInt(r)){throw new TypeError("sizeCalculation return invalid (expect positive integer)")}}else{throw new TypeError("invalid size value (must be positive integer). "+"When maxSize or maxEntrySize is used, sizeCalculation "+"or size must be set.")}}return r};this.#Z=(i,r,n)=>{s[i]=r;if(this.#y){const r=this.#y-s[i];while(this.#_>r){this.#Q(true)}}this.#_+=s[i];if(n){n.entrySize=r;n.totalCalculatedSize=this.#_}}}#J=s=>{};#Z=(s,i,r)=>{};#Y=(s,i,r,n)=>{if(r||n){throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}return 0};*#z({allowStale:s=this.allowStale}={}){if(this.#S){for(let i=this.#T;true;){if(!this.#X(i)){break}if(s||!this.#$(i)){yield i}if(i===this.#P){break}else{i=this.#O[i]}}}}*#q({allowStale:s=this.allowStale}={}){if(this.#S){for(let i=this.#P;true;){if(!this.#X(i)){break}if(s||!this.#$(i)){yield i}if(i===this.#T){break}else{i=this.#E[i]}}}}#X(s){return s!==undefined&&this.#k.get(this.#x[s])===s}*entries(){for(const s of this.#z()){if(this.#C[s]!==undefined&&this.#x[s]!==undefined&&!this.#B(this.#C[s])){yield[this.#x[s],this.#C[s]]}}}*rentries(){for(const s of this.#q()){if(this.#C[s]!==undefined&&this.#x[s]!==undefined&&!this.#B(this.#C[s])){yield[this.#x[s],this.#C[s]]}}}*keys(){for(const s of this.#z()){const i=this.#x[s];if(i!==undefined&&!this.#B(this.#C[s])){yield i}}}*rkeys(){for(const s of this.#q()){const i=this.#x[s];if(i!==undefined&&!this.#B(this.#C[s])){yield i}}}*values(){for(const s of this.#z()){const i=this.#C[s];if(i!==undefined&&!this.#B(this.#C[s])){yield this.#C[s]}}}*rvalues(){for(const s of this.#q()){const i=this.#C[s];if(i!==undefined&&!this.#B(this.#C[s])){yield this.#C[s]}}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(s,i={}){for(const r of this.#z()){const n=this.#C[r];const o=this.#B(n)?n.__staleWhileFetching:n;if(o===undefined)continue;if(s(o,this.#x[r],this)){return this.get(this.#x[r],i)}}}forEach(s,i=this){for(const r of this.#z()){const n=this.#C[r];const o=this.#B(n)?n.__staleWhileFetching:n;if(o===undefined)continue;s.call(i,o,this.#x[r],this)}}rforEach(s,i=this){for(const r of this.#q()){const n=this.#C[r];const o=this.#B(n)?n.__staleWhileFetching:n;if(o===undefined)continue;s.call(i,o,this.#x[r],this)}}purgeStale(){let s=false;for(const i of this.#q({allowStale:true})){if(this.#$(i)){this.delete(this.#x[i]);s=true}}return s}info(s){const i=this.#k.get(s);if(i===undefined)return undefined;const r=this.#C[i];const n=this.#B(r)?r.__staleWhileFetching:r;if(n===undefined)return undefined;const o={value:n};if(this.#D&&this.#M){const s=this.#D[i];const r=this.#M[i];if(s&&r){const i=s-(D.now()-r);o.ttl=i;o.start=Date.now()}}if(this.#L){o.size=this.#L[i]}return o}dump(){const s=[];for(const i of this.#z({allowStale:true})){const r=this.#x[i];const n=this.#C[i];const o=this.#B(n)?n.__staleWhileFetching:n;if(o===undefined||r===undefined)continue;const a={value:o};if(this.#D&&this.#M){a.ttl=this.#D[i];const s=D.now()-this.#M[i];a.start=Math.floor(Date.now()-s)}if(this.#L){a.size=this.#L[i]}s.unshift([r,a])}return s}load(s){this.clear();for(const[i,r]of s){if(r.start){const s=Date.now()-r.start;r.start=D.now()-s}this.set(i,r.value,r)}}set(s,i,r={}){if(i===undefined){this.delete(s);return this}const{ttl:n=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:h=this.sizeCalculation,status:l}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const u=this.#Y(s,i,r.size||0,h);if(this.maxEntrySize&&u>this.maxEntrySize){if(l){l.set="miss";l.maxEntrySizeExceeded=true}this.delete(s);return this}let f=this.#S===0?undefined:this.#k.get(s);if(f===undefined){f=this.#S===0?this.#T:this.#R.length!==0?this.#R.pop():this.#S===this.#m?this.#Q(false):this.#S;this.#x[f]=s;this.#C[f]=i;this.#k.set(s,f);this.#E[this.#T]=f;this.#O[f]=this.#T;this.#T=f;this.#S++;this.#Z(f,u,l);if(l)l.set="add";c=false}else{this.#U(f);const r=this.#C[f];if(i!==r){if(this.#j&&this.#B(r)){r.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:i}=r;if(i!==undefined&&!a){if(this.#F){this.#w?.(i,s,"set")}if(this.#N){this.#A?.push([i,s,"set"])}}}else if(!a){if(this.#F){this.#w?.(r,s,"set")}if(this.#N){this.#A?.push([r,s,"set"])}}this.#J(f);this.#Z(f,u,l);this.#C[f]=i;if(l){l.set="replace";const s=r&&this.#B(r)?r.__staleWhileFetching:r;if(s!==undefined)l.oldValue=s}}else if(l){l.set="update"}}if(n!==0&&!this.#D){this.#H()}if(this.#D){if(!c){this.#G(f,n,o)}if(l)this.#K(l,f)}if(!a&&this.#N&&this.#A){const s=this.#A;let i;while(i=s?.shift()){this.#v?.(...i)}}return this}pop(){try{while(this.#S){const s=this.#C[this.#P];this.#Q(true);if(this.#B(s)){if(s.__staleWhileFetching){return s.__staleWhileFetching}}else if(s!==undefined){return s}}}finally{if(this.#N&&this.#A){const s=this.#A;let i;while(i=s?.shift()){this.#v?.(...i)}}}}#Q(s){const i=this.#P;const r=this.#x[i];const n=this.#C[i];if(this.#j&&this.#B(n)){n.__abortController.abort(new Error("evicted"))}else if(this.#F||this.#N){if(this.#F){this.#w?.(n,r,"evict")}if(this.#N){this.#A?.push([n,r,"evict"])}}this.#J(i);if(s){this.#x[i]=undefined;this.#C[i]=undefined;this.#R.push(i)}if(this.#S===1){this.#P=this.#T=0;this.#R.length=0}else{this.#P=this.#E[i]}this.#k.delete(r);this.#S--;return i}has(s,i={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:n}=i;const o=this.#k.get(s);if(o!==undefined){const s=this.#C[o];if(this.#B(s)&&s.__staleWhileFetching===undefined){return false}if(!this.#$(o)){if(r){this.#V(o)}if(n){n.has="hit";this.#K(n,o)}return true}else if(n){n.has="stale";this.#K(n,o)}}else if(n){n.has="miss"}return false}peek(s,i={}){const{allowStale:r=this.allowStale}=i;const n=this.#k.get(s);if(n===undefined||!r&&this.#$(n)){return}const o=this.#C[n];return this.#B(o)?o.__staleWhileFetching:o}#I(s,i,r,n){const o=i===undefined?undefined:this.#C[i];if(this.#B(o)){return o}const a=new N;const{signal:h}=r;h?.addEventListener("abort",(()=>a.abort(h.reason)),{signal:a.signal});const l={signal:a.signal,options:r,context:n};const cb=(n,o=false)=>{const{aborted:h}=a.signal;const u=r.ignoreFetchAbort&&n!==undefined;if(r.status){if(h&&!o){r.status.fetchAborted=true;r.status.fetchError=a.signal.reason;if(u)r.status.fetchAbortIgnored=true}else{r.status.fetchResolved=true}}if(h&&!u&&!o){return fetchFail(a.signal.reason)}const f=c;if(this.#C[i]===c){if(n===undefined){if(f.__staleWhileFetching){this.#C[i]=f.__staleWhileFetching}else{this.delete(s)}}else{if(r.status)r.status.fetchUpdated=true;this.set(s,n,l.options)}}return n};const eb=s=>{if(r.status){r.status.fetchRejected=true;r.status.fetchError=s}return fetchFail(s)};const fetchFail=n=>{const{aborted:o}=a.signal;const h=o&&r.allowStaleOnFetchAbort;const l=h||r.allowStaleOnFetchRejection;const u=l||r.noDeleteOnFetchRejection;const f=c;if(this.#C[i]===c){const r=!u||f.__staleWhileFetching===undefined;if(r){this.delete(s)}else if(!h){this.#C[i]=f.__staleWhileFetching}}if(l){if(r.status&&f.__staleWhileFetching!==undefined){r.status.returnedStale=true}return f.__staleWhileFetching}else if(f.__returned===f){throw n}};const pcall=(i,n)=>{const h=this.#b?.(s,o,l);if(h&&h instanceof Promise){h.then((s=>i(s===undefined?undefined:s)),n)}a.signal.addEventListener("abort",(()=>{if(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort){i(undefined);if(r.allowStaleOnFetchAbort){i=s=>cb(s,true)}}}))};if(r.status)r.status.fetchDispatched=true;const c=new Promise(pcall).then(cb,eb);const u=Object.assign(c,{__abortController:a,__staleWhileFetching:o,__returned:undefined});if(i===undefined){this.set(s,u,{...l.options,status:undefined});i=this.#k.get(s)}else{this.#C[i]=u}return u}#B(s){if(!this.#j)return false;const i=s;return!!i&&i instanceof Promise&&i.hasOwnProperty("__staleWhileFetching")&&i.__abortController instanceof N}async fetch(s,i={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:y,forceRefresh:w=false,status:v,signal:b}=i;if(!this.#j){if(v)v.fetch="get";return this.get(s,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,status:v})}const S={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:h,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:g,ignoreFetchAbort:p,status:v,signal:b};let _=this.#k.get(s);if(_===undefined){if(v)v.fetch="miss";const i=this.#I(s,_,S,y);return i.__returned=i}else{const i=this.#C[_];if(this.#B(i)){const s=r&&i.__staleWhileFetching!==undefined;if(v){v.fetch="inflight";if(s)v.returnedStale=true}return s?i.__staleWhileFetching:i.__returned=i}const o=this.#$(_);if(!w&&!o){if(v)v.fetch="hit";this.#U(_);if(n){this.#V(_)}if(v)this.#K(v,_);return i}const a=this.#I(s,_,S,y);const h=a.__staleWhileFetching!==undefined;const l=h&&r;if(v){v.fetch=o?"stale":"refresh";if(l&&o)v.returnedStale=true}return l?a.__staleWhileFetching:a.__returned=a}}get(s,i={}){const{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=i;const h=this.#k.get(s);if(h!==undefined){const i=this.#C[h];const l=this.#B(i);if(a)this.#K(a,h);if(this.#$(h)){if(a)a.get="stale";if(!l){if(!o){this.delete(s)}if(a&&r)a.returnedStale=true;return r?i:undefined}else{if(a&&r&&i.__staleWhileFetching!==undefined){a.returnedStale=true}return r?i.__staleWhileFetching:undefined}}else{if(a)a.get="hit";if(l){return i.__staleWhileFetching}this.#U(h);if(n){this.#V(h)}return i}}else if(a){a.get="miss"}}#tt(s,i){this.#O[i]=s;this.#E[s]=i}#U(s){if(s!==this.#T){if(s===this.#P){this.#P=this.#E[s]}else{this.#tt(this.#O[s],this.#E[s])}this.#tt(this.#T,s);this.#T=s}}delete(s){let i=false;if(this.#S!==0){const r=this.#k.get(s);if(r!==undefined){i=true;if(this.#S===1){this.clear()}else{this.#J(r);const i=this.#C[r];if(this.#B(i)){i.__abortController.abort(new Error("deleted"))}else if(this.#F||this.#N){if(this.#F){this.#w?.(i,s,"delete")}if(this.#N){this.#A?.push([i,s,"delete"])}}this.#k.delete(s);this.#x[r]=undefined;this.#C[r]=undefined;if(r===this.#T){this.#T=this.#O[r]}else if(r===this.#P){this.#P=this.#E[r]}else{const s=this.#O[r];this.#E[s]=this.#E[r];const i=this.#E[r];this.#O[i]=this.#O[r]}this.#S--;this.#R.push(r)}}}if(this.#N&&this.#A?.length){const s=this.#A;let i;while(i=s?.shift()){this.#v?.(...i)}}return i}clear(){for(const s of this.#q({allowStale:true})){const i=this.#C[s];if(this.#B(i)){i.__abortController.abort(new Error("deleted"))}else{const r=this.#x[s];if(this.#F){this.#w?.(i,r,"delete")}if(this.#N){this.#A?.push([i,r,"delete"])}}}this.#k.clear();this.#C.fill(undefined);this.#x.fill(undefined);if(this.#D&&this.#M){this.#D.fill(0);this.#M.fill(0)}if(this.#L){this.#L.fill(0)}this.#P=0;this.#T=0;this.#R.length=0;this.#_=0;this.#S=0;if(this.#N&&this.#A){const s=this.#A;let i;while(i=s?.shift()){this.#v?.(...i)}}}}const U=s(import.meta.url)("node:path");var z=__nccwpck_require__(147);const q=s(import.meta.url)("node:fs");var $=__nccwpck_require__.t(q,2);var W=__nccwpck_require__.n(q);const H=s(import.meta.url)("node:fs/promises");const G=s(import.meta.url)("node:events");const V=s(import.meta.url)("node:stream");const K=s(import.meta.url)("node:string_decoder");const J=typeof process==="object"&&process?process:{stdout:null,stderr:null};const isStream=s=>!!s&&typeof s==="object"&&(s instanceof Minipass||s instanceof V||isReadable(s)||isWritable(s));const isReadable=s=>!!s&&typeof s==="object"&&s instanceof G.EventEmitter&&typeof s.pipe==="function"&&s.pipe!==V.Writable.prototype.pipe;const isWritable=s=>!!s&&typeof s==="object"&&s instanceof G.EventEmitter&&typeof s.write==="function"&&typeof s.end==="function";const Y=Symbol("EOF");const Z=Symbol("maybeEmitEnd");const Q=Symbol("emittedEnd");const X=Symbol("emittingEnd");const tt=Symbol("emittedError");const et=Symbol("closed");const st=Symbol("read");const it=Symbol("flush");const rt=Symbol("flushChunk");const nt=Symbol("encoding");const ot=Symbol("decoder");const at=Symbol("flowing");const ht=Symbol("paused");const lt=Symbol("resume");const ct=Symbol("buffer");const ut=Symbol("pipes");const ft=Symbol("bufferLength");const dt=Symbol("bufferPush");const pt=Symbol("bufferShift");const gt=Symbol("objectMode");const mt=Symbol("destroyed");const yt=Symbol("error");const wt=Symbol("emitData");const vt=Symbol("emitEnd");const bt=Symbol("emitEnd2");const St=Symbol("async");const _t=Symbol("abort");const kt=Symbol("aborted");const xt=Symbol("signal");const Ct=Symbol("dataListeners");const Et=Symbol("discarded");const defer=s=>Promise.resolve().then(s);const nodefer=s=>s();const isEndish=s=>s==="end"||s==="finish"||s==="prefinish";const isArrayBufferLike=s=>s instanceof ArrayBuffer||!!s&&typeof s==="object"&&s.constructor&&s.constructor.name==="ArrayBuffer"&&s.byteLength>=0;const isArrayBufferView=s=>!Buffer.isBuffer(s)&&ArrayBuffer.isView(s);class Pipe{src;dest;opts;ondrain;constructor(s,i,r){this.src=s;this.dest=i;this.opts=r;this.ondrain=()=>s[lt]();this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(s){}end(){this.unpipe();if(this.opts.end)this.dest.end()}}class PipeProxyErrors extends Pipe{unpipe(){this.src.removeListener("error",this.proxyErrors);super.unpipe()}constructor(s,i,r){super(s,i,r);this.proxyErrors=s=>i.emit("error",s);s.on("error",this.proxyErrors)}}const isObjectModeOptions=s=>!!s.objectMode;const isEncodingOptions=s=>!s.objectMode&&!!s.encoding&&s.encoding!=="buffer";class Minipass extends G.EventEmitter{[at]=false;[ht]=false;[ut]=[];[ct]=[];[gt];[nt];[St];[ot];[Y]=false;[Q]=false;[X]=false;[et]=false;[tt]=null;[ft]=0;[mt]=false;[xt];[kt]=false;[Ct]=0;[Et]=false;writable=true;readable=true;constructor(...s){const i=s[0]||{};super();if(i.objectMode&&typeof i.encoding==="string"){throw new TypeError("Encoding and objectMode may not be used together")}if(isObjectModeOptions(i)){this[gt]=true;this[nt]=null}else if(isEncodingOptions(i)){this[nt]=i.encoding;this[gt]=false}else{this[gt]=false;this[nt]=null}this[St]=!!i.async;this[ot]=this[nt]?new K.StringDecoder(this[nt]):null;if(i&&i.debugExposeBuffer===true){Object.defineProperty(this,"buffer",{get:()=>this[ct]})}if(i&&i.debugExposePipes===true){Object.defineProperty(this,"pipes",{get:()=>this[ut]})}const{signal:r}=i;if(r){this[xt]=r;if(r.aborted){this[_t]()}else{r.addEventListener("abort",(()=>this[_t]()))}}}get bufferLength(){return this[ft]}get encoding(){return this[nt]}set encoding(s){throw new Error("Encoding must be set at instantiation time")}setEncoding(s){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[gt]}set objectMode(s){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[St]}set["async"](s){this[St]=this[St]||!!s}[_t](){this[kt]=true;this.emit("abort",this[xt]?.reason);this.destroy(this[xt]?.reason)}get aborted(){return this[kt]}set aborted(s){}write(s,i,r){if(this[kt])return false;if(this[Y])throw new Error("write after end");if(this[mt]){this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"}));return true}if(typeof i==="function"){r=i;i="utf8"}if(!i)i="utf8";const n=this[St]?defer:nodefer;if(!this[gt]&&!Buffer.isBuffer(s)){if(isArrayBufferView(s)){s=Buffer.from(s.buffer,s.byteOffset,s.byteLength)}else if(isArrayBufferLike(s)){s=Buffer.from(s)}else if(typeof s!=="string"){throw new Error("Non-contiguous data written to non-objectMode stream")}}if(this[gt]){if(this[at]&&this[ft]!==0)this[it](true);if(this[at])this.emit("data",s);else this[dt](s);if(this[ft]!==0)this.emit("readable");if(r)n(r);return this[at]}if(!s.length){if(this[ft]!==0)this.emit("readable");if(r)n(r);return this[at]}if(typeof s==="string"&&!(i===this[nt]&&!this[ot]?.lastNeed)){s=Buffer.from(s,i)}if(Buffer.isBuffer(s)&&this[nt]){s=this[ot].write(s)}if(this[at]&&this[ft]!==0)this[it](true);if(this[at])this.emit("data",s);else this[dt](s);if(this[ft]!==0)this.emit("readable");if(r)n(r);return this[at]}read(s){if(this[mt])return null;this[Et]=false;if(this[ft]===0||s===0||s&&s>this[ft]){this[Z]();return null}if(this[gt])s=null;if(this[ct].length>1&&!this[gt]){this[ct]=[this[nt]?this[ct].join(""):Buffer.concat(this[ct],this[ft])]}const i=this[st](s||null,this[ct][0]);this[Z]();return i}[st](s,i){if(this[gt])this[pt]();else{const r=i;if(s===r.length||s===null)this[pt]();else if(typeof r==="string"){this[ct][0]=r.slice(s);i=r.slice(0,s);this[ft]-=s}else{this[ct][0]=r.subarray(s);i=r.subarray(0,s);this[ft]-=s}}this.emit("data",i);if(!this[ct].length&&!this[Y])this.emit("drain");return i}end(s,i,r){if(typeof s==="function"){r=s;s=undefined}if(typeof i==="function"){r=i;i="utf8"}if(s!==undefined)this.write(s,i);if(r)this.once("end",r);this[Y]=true;this.writable=false;if(this[at]||!this[ht])this[Z]();return this}[lt](){if(this[mt])return;if(!this[Ct]&&!this[ut].length){this[Et]=true}this[ht]=false;this[at]=true;this.emit("resume");if(this[ct].length)this[it]();else if(this[Y])this[Z]();else this.emit("drain")}resume(){return this[lt]()}pause(){this[at]=false;this[ht]=true;this[Et]=false}get destroyed(){return this[mt]}get flowing(){return this[at]}get paused(){return this[ht]}[dt](s){if(this[gt])this[ft]+=1;else this[ft]+=s.length;this[ct].push(s)}[pt](){if(this[gt])this[ft]-=1;else this[ft]-=this[ct][0].length;return this[ct].shift()}[it](s=false){do{}while(this[rt](this[pt]())&&this[ct].length);if(!s&&!this[ct].length&&!this[Y])this.emit("drain")}[rt](s){this.emit("data",s);return this[at]}pipe(s,i){if(this[mt])return s;this[Et]=false;const r=this[Q];i=i||{};if(s===J.stdout||s===J.stderr)i.end=false;else i.end=i.end!==false;i.proxyErrors=!!i.proxyErrors;if(r){if(i.end)s.end()}else{this[ut].push(!i.proxyErrors?new Pipe(this,s,i):new PipeProxyErrors(this,s,i));if(this[St])defer((()=>this[lt]()));else this[lt]()}return s}unpipe(s){const i=this[ut].find((i=>i.dest===s));if(i){if(this[ut].length===1){if(this[at]&&this[Ct]===0){this[at]=false}this[ut]=[]}else this[ut].splice(this[ut].indexOf(i),1);i.unpipe()}}addListener(s,i){return this.on(s,i)}on(s,i){const r=super.on(s,i);if(s==="data"){this[Et]=false;this[Ct]++;if(!this[ut].length&&!this[at]){this[lt]()}}else if(s==="readable"&&this[ft]!==0){super.emit("readable")}else if(isEndish(s)&&this[Q]){super.emit(s);this.removeAllListeners(s)}else if(s==="error"&&this[tt]){const s=i;if(this[St])defer((()=>s.call(this,this[tt])));else s.call(this,this[tt])}return r}removeListener(s,i){return this.off(s,i)}off(s,i){const r=super.off(s,i);if(s==="data"){this[Ct]=this.listeners("data").length;if(this[Ct]===0&&!this[Et]&&!this[ut].length){this[at]=false}}return r}removeAllListeners(s){const i=super.removeAllListeners(s);if(s==="data"||s===undefined){this[Ct]=0;if(!this[Et]&&!this[ut].length){this[at]=false}}return i}get emittedEnd(){return this[Q]}[Z](){if(!this[X]&&!this[Q]&&!this[mt]&&this[ct].length===0&&this[Y]){this[X]=true;this.emit("end");this.emit("prefinish");this.emit("finish");if(this[et])this.emit("close");this[X]=false}}emit(s,...i){const r=i[0];if(s!=="error"&&s!=="close"&&s!==mt&&this[mt]){return false}else if(s==="data"){return!this[gt]&&!r?false:this[St]?(defer((()=>this[wt](r))),true):this[wt](r)}else if(s==="end"){return this[vt]()}else if(s==="close"){this[et]=true;if(!this[Q]&&!this[mt])return false;const s=super.emit("close");this.removeAllListeners("close");return s}else if(s==="error"){this[tt]=r;super.emit(yt,r);const s=!this[xt]||this.listeners("error").length?super.emit("error",r):false;this[Z]();return s}else if(s==="resume"){const s=super.emit("resume");this[Z]();return s}else if(s==="finish"||s==="prefinish"){const i=super.emit(s);this.removeAllListeners(s);return i}const n=super.emit(s,...i);this[Z]();return n}[wt](s){for(const i of this[ut]){if(i.dest.write(s)===false)this.pause()}const i=this[Et]?false:super.emit("data",s);this[Z]();return i}[vt](){if(this[Q])return false;this[Q]=true;this.readable=false;return this[St]?(defer((()=>this[bt]())),true):this[bt]()}[bt](){if(this[ot]){const s=this[ot].end();if(s){for(const i of this[ut]){i.dest.write(s)}if(!this[Et])super.emit("data",s)}}for(const s of this[ut]){s.end()}const s=super.emit("end");this.removeAllListeners("end");return s}async collect(){const s=Object.assign([],{dataLength:0});if(!this[gt])s.dataLength=0;const i=this.promise();this.on("data",(i=>{s.push(i);if(!this[gt])s.dataLength+=i.length}));await i;return s}async concat(){if(this[gt]){throw new Error("cannot concat in objectMode")}const s=await this.collect();return this[nt]?s.join(""):Buffer.concat(s,s.dataLength)}async promise(){return new Promise(((s,i)=>{this.on(mt,(()=>i(new Error("stream destroyed"))));this.on("error",(s=>i(s)));this.on("end",(()=>s()))}))}[Symbol.asyncIterator](){this[Et]=false;let s=false;const stop=async()=>{this.pause();s=true;return{value:undefined,done:true}};const next=()=>{if(s)return stop();const i=this.read();if(i!==null)return Promise.resolve({done:false,value:i});if(this[Y])return stop();let r;let n;const onerr=s=>{this.off("data",ondata);this.off("end",onend);this.off(mt,ondestroy);stop();n(s)};const ondata=s=>{this.off("error",onerr);this.off("end",onend);this.off(mt,ondestroy);this.pause();r({value:s,done:!!this[Y]})};const onend=()=>{this.off("error",onerr);this.off("data",ondata);this.off(mt,ondestroy);stop();r({done:true,value:undefined})};const ondestroy=()=>onerr(new Error("stream destroyed"));return new Promise(((s,i)=>{n=i;r=s;this.once(mt,ondestroy);this.once("error",onerr);this.once("end",onend);this.once("data",ondata)}))};return{next:next,throw:stop,return:stop,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Et]=false;let s=false;const stop=()=>{this.pause();this.off(yt,stop);this.off(mt,stop);this.off("end",stop);s=true;return{done:true,value:undefined}};const next=()=>{if(s)return stop();const i=this.read();return i===null?stop():{done:false,value:i}};this.once("end",stop);this.once(yt,stop);this.once(mt,stop);return{next:next,throw:stop,return:stop,[Symbol.iterator](){return this}}}destroy(s){if(this[mt]){if(s)this.emit("error",s);else this.emit(mt);return this}this[mt]=true;this[Et]=true;this[ct].length=0;this[ft]=0;const i=this;if(typeof i.close==="function"&&!this[et])i.close();if(s)this.emit("error",s);else this.emit(mt);return this}static get isStream(){return isStream}}const Ot=z.realpathSync.native;const Pt={lstatSync:z.lstatSync,readdir:z.readdir,readdirSync:z.readdirSync,readlinkSync:z.readlinkSync,realpathSync:Ot,promises:{lstat:H.lstat,readdir:H.readdir,readlink:H.readlink,realpath:H.realpath}};const fsFromOption=s=>!s||s===Pt||s===$?Pt:{...Pt,...s,promises:{...Pt.promises,...s.promises||{}}};const Tt=/^\\\\\?\\([a-z]:)\\?$/i;const uncToDrive=s=>s.replace(/\//g,"\\").replace(Tt,"$1\\");const Rt=/[\\\/]/;const At=0;const Lt=1;const Mt=2;const Dt=4;const Ft=6;const jt=8;const Nt=10;const Bt=12;const It=15;const Ut=~It;const zt=16;const qt=32;const $t=64;const Wt=128;const Ht=256;const Gt=512;const Vt=$t|Wt|Gt;const Kt=1023;const entToType=s=>s.isFile()?jt:s.isDirectory()?Dt:s.isSymbolicLink()?Nt:s.isCharacterDevice()?Mt:s.isBlockDevice()?Ft:s.isSocket()?Bt:s.isFIFO()?Lt:At;const Jt=new Map;const normalize=s=>{const i=Jt.get(s);if(i)return i;const r=s.normalize("NFKD");Jt.set(s,r);return r};const Yt=new Map;const normalizeNocase=s=>{const i=Yt.get(s);if(i)return i;const r=normalize(s.toLowerCase());Yt.set(s,r);return r};class ResolveCache extends LRUCache{constructor(){super({max:256})}}class ChildrenCache extends LRUCache{constructor(s=16*1024){super({maxSize:s,sizeCalculation:s=>s.length+1})}}const Zt=Symbol("PathScurry setAsCwd");class PathBase{name;root;roots;parent;nocase;isCWD=false;#et;#st;get dev(){return this.#st}#it;get mode(){return this.#it}#rt;get nlink(){return this.#rt}#nt;get uid(){return this.#nt}#ot;get gid(){return this.#ot}#at;get rdev(){return this.#at}#ht;get blksize(){return this.#ht}#lt;get ino(){return this.#lt}#S;get size(){return this.#S}#ct;get blocks(){return this.#ct}#ut;get atimeMs(){return this.#ut}#ft;get mtimeMs(){return this.#ft}#dt;get ctimeMs(){return this.#dt}#pt;get birthtimeMs(){return this.#pt}#gt;get atime(){return this.#gt}#mt;get mtime(){return this.#mt}#yt;get ctime(){return this.#yt}#wt;get birthtime(){return this.#wt}#vt;#bt;#St;#_t;#kt;#xt;#Ct;#Et;#Ot;#Pt;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(s,i=At,r,n,o,a,h){this.name=s;this.#vt=o?normalizeNocase(s):normalize(s);this.#Ct=i&Kt;this.nocase=o;this.roots=n;this.root=r||this;this.#Et=a;this.#St=h.fullpath;this.#kt=h.relative;this.#xt=h.relativePosix;this.parent=h.parent;if(this.parent){this.#et=this.parent.#et}else{this.#et=fsFromOption(h.fs)}}depth(){if(this.#bt!==undefined)return this.#bt;if(!this.parent)return this.#bt=0;return this.#bt=this.parent.depth()+1}childrenCache(){return this.#Et}resolve(s){if(!s){return this}const i=this.getRootString(s);const r=s.substring(i.length);const n=r.split(this.splitSep);const o=i?this.getRoot(i).#Tt(n):this.#Tt(n);return o}#Tt(s){let i=this;for(const r of s){i=i.child(r)}return i}children(){const s=this.#Et.get(this);if(s){return s}const i=Object.assign([],{provisional:0});this.#Et.set(this,i);this.#Ct&=~zt;return i}child(s,i){if(s===""||s==="."){return this}if(s===".."){return this.parent||this}const r=this.children();const n=this.nocase?normalizeNocase(s):normalize(s);for(const s of r){if(s.#vt===n){return s}}const o=this.parent?this.sep:"";const a=this.#St?this.#St+o+s:undefined;const h=this.newChild(s,At,{...i,parent:this,fullpath:a});if(!this.canReaddir()){h.#Ct|=Wt}r.push(h);return h}relative(){if(this.isCWD)return"";if(this.#kt!==undefined){return this.#kt}const s=this.name;const i=this.parent;if(!i){return this.#kt=this.name}const r=i.relative();return r+(!r||!i.parent?"":this.sep)+s}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#xt!==undefined)return this.#xt;const s=this.name;const i=this.parent;if(!i){return this.#xt=this.fullpathPosix()}const r=i.relativePosix();return r+(!r||!i.parent?"":"/")+s}fullpath(){if(this.#St!==undefined){return this.#St}const s=this.name;const i=this.parent;if(!i){return this.#St=this.name}const r=i.fullpath();const n=r+(!i.parent?"":this.sep)+s;return this.#St=n}fullpathPosix(){if(this.#_t!==undefined)return this.#_t;if(this.sep==="/")return this.#_t=this.fullpath();if(!this.parent){const s=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(s)){return this.#_t=`//?/${s}`}else{return this.#_t=s}}const s=this.parent;const i=s.fullpathPosix();const r=i+(!i||!s.parent?"":"/")+this.name;return this.#_t=r}isUnknown(){return(this.#Ct&It)===At}isType(s){return this[`is${s}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#Ct&It)===jt}isDirectory(){return(this.#Ct&It)===Dt}isCharacterDevice(){return(this.#Ct&It)===Mt}isBlockDevice(){return(this.#Ct&It)===Ft}isFIFO(){return(this.#Ct&It)===Lt}isSocket(){return(this.#Ct&It)===Bt}isSymbolicLink(){return(this.#Ct&Nt)===Nt}lstatCached(){return this.#Ct&qt?this:undefined}readlinkCached(){return this.#Ot}realpathCached(){return this.#Pt}readdirCached(){const s=this.children();return s.slice(0,s.provisional)}canReadlink(){if(this.#Ot)return true;if(!this.parent)return false;const s=this.#Ct&It;return!(s!==At&&s!==Nt||this.#Ct&Ht||this.#Ct&Wt)}calledReaddir(){return!!(this.#Ct&zt)}isENOENT(){return!!(this.#Ct&Wt)}isNamed(s){return!this.nocase?this.#vt===normalize(s):this.#vt===normalizeNocase(s)}async readlink(){const s=this.#Ot;if(s){return s}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const s=await this.#et.promises.readlink(this.fullpath());const i=(await this.parent.realpath())?.resolve(s);if(i){return this.#Ot=i}}catch(s){this.#Rt(s.code);return undefined}}readlinkSync(){const s=this.#Ot;if(s){return s}if(!this.canReadlink()){return undefined}if(!this.parent){return undefined}try{const s=this.#et.readlinkSync(this.fullpath());const i=this.parent.realpathSync()?.resolve(s);if(i){return this.#Ot=i}}catch(s){this.#Rt(s.code);return undefined}}#At(s){this.#Ct|=zt;for(let i=s.provisional;i<s.length;i++){const r=s[i];if(r)r.#Lt()}}#Lt(){if(this.#Ct&Wt)return;this.#Ct=(this.#Ct|Wt)&Ut;this.#Mt()}#Mt(){const s=this.children();s.provisional=0;for(const i of s){i.#Lt()}}#Dt(){this.#Ct|=Gt;this.#Ft()}#Ft(){if(this.#Ct&$t)return;let s=this.#Ct;if((s&It)===Dt)s&=Ut;this.#Ct=s|$t;this.#Mt()}#jt(s=""){if(s==="ENOTDIR"||s==="EPERM"){this.#Ft()}else if(s==="ENOENT"){this.#Lt()}else{this.children().provisional=0}}#Nt(s=""){if(s==="ENOTDIR"){const s=this.parent;s.#Ft()}else if(s==="ENOENT"){this.#Lt()}}#Rt(s=""){let i=this.#Ct;i|=Ht;if(s==="ENOENT")i|=Wt;if(s==="EINVAL"||s==="UNKNOWN"){i&=Ut}this.#Ct=i;if(s==="ENOTDIR"&&this.parent){this.parent.#Ft()}}#Bt(s,i){return this.#It(s,i)||this.#Ut(s,i)}#Ut(s,i){const r=entToType(s);const n=this.newChild(s.name,r,{parent:this});const o=n.#Ct&It;if(o!==Dt&&o!==Nt&&o!==At){n.#Ct|=$t}i.unshift(n);i.provisional++;return n}#It(s,i){for(let r=i.provisional;r<i.length;r++){const n=i[r];const o=this.nocase?normalizeNocase(s.name):normalize(s.name);if(o!==n.#vt){continue}return this.#zt(s,n,r,i)}}#zt(s,i,r,n){const o=i.name;i.#Ct=i.#Ct&Ut|entToType(s);if(o!==s.name)i.name=s.name;if(r!==n.provisional){if(r===n.length-1)n.pop();else n.splice(r,1);n.unshift(i)}n.provisional++;return i}async lstat(){if((this.#Ct&Wt)===0){try{this.#qt(await this.#et.promises.lstat(this.fullpath()));return this}catch(s){this.#Nt(s.code)}}}lstatSync(){if((this.#Ct&Wt)===0){try{this.#qt(this.#et.lstatSync(this.fullpath()));return this}catch(s){this.#Nt(s.code)}}}#qt(s){const{atime:i,atimeMs:r,birthtime:n,birthtimeMs:o,blksize:a,blocks:h,ctime:l,ctimeMs:c,dev:u,gid:f,ino:d,mode:p,mtime:g,mtimeMs:y,nlink:w,rdev:v,size:b,uid:S}=s;this.#gt=i;this.#ut=r;this.#wt=n;this.#pt=o;this.#ht=a;this.#ct=h;this.#yt=l;this.#dt=c;this.#st=u;this.#ot=f;this.#lt=d;this.#it=p;this.#mt=g;this.#ft=y;this.#rt=w;this.#at=v;this.#S=b;this.#nt=S;const _=entToType(s);this.#Ct=this.#Ct&Ut|_|qt;if(_!==At&&_!==Dt&&_!==Nt){this.#Ct|=$t}}#$t=[];#Wt=false;#Ht(s){this.#Wt=false;const i=this.#$t.slice();this.#$t.length=0;i.forEach((i=>i(null,s)))}readdirCB(s,i=false){if(!this.canReaddir()){if(i)s(null,[]);else queueMicrotask((()=>s(null,[])));return}const r=this.children();if(this.calledReaddir()){const n=r.slice(0,r.provisional);if(i)s(null,n);else queueMicrotask((()=>s(null,n)));return}this.#$t.push(s);if(this.#Wt){return}this.#Wt=true;const n=this.fullpath();this.#et.readdir(n,{withFileTypes:true},((s,i)=>{if(s){this.#jt(s.code);r.provisional=0}else{for(const s of i){this.#Bt(s,r)}this.#At(r)}this.#Ht(r.slice(0,r.provisional));return}))}#Gt;async readdir(){if(!this.canReaddir()){return[]}const s=this.children();if(this.calledReaddir()){return s.slice(0,s.provisional)}const i=this.fullpath();if(this.#Gt){await this.#Gt}else{let resolve=()=>{};this.#Gt=new Promise((s=>resolve=s));try{for(const r of await this.#et.promises.readdir(i,{withFileTypes:true})){this.#Bt(r,s)}this.#At(s)}catch(i){this.#jt(i.code);s.provisional=0}this.#Gt=undefined;resolve()}return s.slice(0,s.provisional)}readdirSync(){if(!this.canReaddir()){return[]}const s=this.children();if(this.calledReaddir()){return s.slice(0,s.provisional)}const i=this.fullpath();try{for(const r of this.#et.readdirSync(i,{withFileTypes:true})){this.#Bt(r,s)}this.#At(s)}catch(i){this.#jt(i.code);s.provisional=0}return s.slice(0,s.provisional)}canReaddir(){if(this.#Ct&Vt)return false;const s=It&this.#Ct;if(!(s===At||s===Dt||s===Nt)){return false}return true}shouldWalk(s,i){return(this.#Ct&Dt)===Dt&&!(this.#Ct&Vt)&&!s.has(this)&&(!i||i(this))}async realpath(){if(this.#Pt)return this.#Pt;if((Gt|Ht|Wt)&this.#Ct)return undefined;try{const s=await this.#et.promises.realpath(this.fullpath());return this.#Pt=this.resolve(s)}catch(s){this.#Dt()}}realpathSync(){if(this.#Pt)return this.#Pt;if((Gt|Ht|Wt)&this.#Ct)return undefined;try{const s=this.#et.realpathSync(this.fullpath());return this.#Pt=this.resolve(s)}catch(s){this.#Dt()}}[Zt](s){if(s===this)return;s.isCWD=false;this.isCWD=true;const i=new Set([]);let r=[];let n=this;while(n&&n.parent){i.add(n);n.#kt=r.join(this.sep);n.#xt=r.join("/");n=n.parent;r.push("..")}n=s;while(n&&n.parent&&!i.has(n)){n.#kt=undefined;n.#xt=undefined;n=n.parent}}}class PathWin32 extends PathBase{sep="\\";splitSep=Rt;constructor(s,i=At,r,n,o,a,h){super(s,i,r,n,o,a,h)}newChild(s,i=At,r={}){return new PathWin32(s,i,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(s){return U.win32.parse(s).root}getRoot(s){s=uncToDrive(s.toUpperCase());if(s===this.root.name){return this.root}for(const[i,r]of Object.entries(this.roots)){if(this.sameRoot(s,i)){return this.roots[s]=r}}return this.roots[s]=new PathScurryWin32(s,this).root}sameRoot(s,i=this.root.name){s=s.toUpperCase().replace(/\//g,"\\").replace(Tt,"$1\\");return s===i}}class PathPosix extends PathBase{splitSep="/";sep="/";constructor(s,i=At,r,n,o,a,h){super(s,i,r,n,o,a,h)}getRootString(s){return s.startsWith("/")?"/":""}getRoot(s){return this.root}newChild(s,i=At,r={}){return new PathPosix(s,i,this.root,this.roots,this.nocase,this.childrenCache(),r)}}class PathScurryBase{root;rootPath;roots;cwd;#Vt;#Kt;#Et;nocase;#et;constructor(s=process.cwd(),i,r,{nocase:n,childrenCacheSize:o=16*1024,fs:a=Pt}={}){this.#et=fsFromOption(a);if(s instanceof URL||s.startsWith("file://")){s=(0,M.fileURLToPath)(s)}const h=i.resolve(s);this.roots=Object.create(null);this.rootPath=this.parseRootPath(h);this.#Vt=new ResolveCache;this.#Kt=new ResolveCache;this.#Et=new ChildrenCache(o);const l=h.substring(this.rootPath.length).split(r);if(l.length===1&&!l[0]){l.pop()}if(n===undefined){throw new TypeError("must provide nocase setting to PathScurryBase ctor")}this.nocase=n;this.root=this.newRoot(this.#et);this.roots[this.rootPath]=this.root;let c=this.root;let u=l.length-1;const f=i.sep;let d=this.rootPath;let p=false;for(const s of l){const i=u--;c=c.child(s,{relative:new Array(i).fill("..").join(f),relativePosix:new Array(i).fill("..").join("/"),fullpath:d+=(p?"":f)+s});p=true}this.cwd=c}depth(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.depth()}childrenCache(){return this.#Et}resolve(...s){let i="";for(let r=s.length-1;r>=0;r--){const n=s[r];if(!n||n===".")continue;i=i?`${n}/${i}`:n;if(this.isAbsolute(n)){break}}const r=this.#Vt.get(i);if(r!==undefined){return r}const n=this.cwd.resolve(i).fullpath();this.#Vt.set(i,n);return n}resolvePosix(...s){let i="";for(let r=s.length-1;r>=0;r--){const n=s[r];if(!n||n===".")continue;i=i?`${n}/${i}`:n;if(this.isAbsolute(n)){break}}const r=this.#Kt.get(i);if(r!==undefined){return r}const n=this.cwd.resolve(i).fullpathPosix();this.#Kt.set(i,n);return n}relative(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.relative()}relativePosix(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.relativePosix()}basename(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.name}dirname(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return(s.parent||s).fullpath()}async readdir(s=this.cwd,i={withFileTypes:true}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r}=i;if(!s.canReaddir()){return[]}else{const i=await s.readdir();return r?i:i.map((s=>s.name))}}readdirSync(s=this.cwd,i={withFileTypes:true}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true}=i;if(!s.canReaddir()){return[]}else if(r){return s.readdirSync()}else{return s.readdirSync().map((s=>s.name))}}async lstat(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.lstat()}lstatSync(s=this.cwd){if(typeof s==="string"){s=this.cwd.resolve(s)}return s.lstatSync()}async readlink(s=this.cwd,{withFileTypes:i}={withFileTypes:false}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s.withFileTypes;s=this.cwd}const r=await s.readlink();return i?r:r?.fullpath()}readlinkSync(s=this.cwd,{withFileTypes:i}={withFileTypes:false}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s.withFileTypes;s=this.cwd}const r=s.readlinkSync();return i?r:r?.fullpath()}async realpath(s=this.cwd,{withFileTypes:i}={withFileTypes:false}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s.withFileTypes;s=this.cwd}const r=await s.realpath();return i?r:r?.fullpath()}realpathSync(s=this.cwd,{withFileTypes:i}={withFileTypes:false}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s.withFileTypes;s=this.cwd}const r=s.realpathSync();return i?r:r?.fullpath()}async walk(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true,follow:n=false,filter:o,walkFilter:a}=i;const h=[];if(!o||o(s)){h.push(r?s:s.fullpath())}const l=new Set;const walk=(s,i)=>{l.add(s);s.readdirCB(((s,c)=>{if(s){return i(s)}let u=c.length;if(!u)return i();const next=()=>{if(--u===0){i()}};for(const s of c){if(!o||o(s)){h.push(r?s:s.fullpath())}if(n&&s.isSymbolicLink()){s.realpath().then((s=>s?.isUnknown()?s.lstat():s)).then((s=>s?.shouldWalk(l,a)?walk(s,next):next()))}else{if(s.shouldWalk(l,a)){walk(s,next)}else{next()}}}}),true)};const c=s;return new Promise(((s,i)=>{walk(c,(r=>{if(r)return i(r);s(h)}))}))}walkSync(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true,follow:n=false,filter:o,walkFilter:a}=i;const h=[];if(!o||o(s)){h.push(r?s:s.fullpath())}const l=new Set([s]);for(const s of l){const i=s.readdirSync();for(const s of i){if(!o||o(s)){h.push(r?s:s.fullpath())}let i=s;if(s.isSymbolicLink()){if(!(n&&(i=s.realpathSync())))continue;if(i.isUnknown())i.lstatSync()}if(i.shouldWalk(l,a)){l.add(i)}}}return h}[Symbol.asyncIterator](){return this.iterate()}iterate(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}return this.stream(s,i)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true,follow:n=false,filter:o,walkFilter:a}=i;if(!o||o(s)){yield r?s:s.fullpath()}const h=new Set([s]);for(const s of h){const i=s.readdirSync();for(const s of i){if(!o||o(s)){yield r?s:s.fullpath()}let i=s;if(s.isSymbolicLink()){if(!(n&&(i=s.realpathSync())))continue;if(i.isUnknown())i.lstatSync()}if(i.shouldWalk(h,a)){h.add(i)}}}}stream(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true,follow:n=false,filter:o,walkFilter:a}=i;const h=new Minipass({objectMode:true});if(!o||o(s)){h.write(r?s:s.fullpath())}const l=new Set;const c=[s];let u=0;const process=()=>{let s=false;while(!s){const i=c.shift();if(!i){if(u===0)h.end();return}u++;l.add(i);const onReaddir=(i,d,p=false)=>{if(i)return h.emit("error",i);if(n&&!p){const s=[];for(const i of d){if(i.isSymbolicLink()){s.push(i.realpath().then((s=>s?.isUnknown()?s.lstat():s)))}}if(s.length){Promise.all(s).then((()=>onReaddir(null,d,true)));return}}for(const i of d){if(i&&(!o||o(i))){if(!h.write(r?i:i.fullpath())){s=true}}}u--;for(const s of d){const i=s.realpathCached()||s;if(i.shouldWalk(l,a)){c.push(i)}}if(s&&!h.flowing){h.once("drain",process)}else if(!f){process()}};let f=true;i.readdirCB(onReaddir,true);f=false}};process();return h}streamSync(s=this.cwd,i={}){if(typeof s==="string"){s=this.cwd.resolve(s)}else if(!(s instanceof PathBase)){i=s;s=this.cwd}const{withFileTypes:r=true,follow:n=false,filter:o,walkFilter:a}=i;const h=new Minipass({objectMode:true});const l=new Set;if(!o||o(s)){h.write(r?s:s.fullpath())}const c=[s];let u=0;const process=()=>{let s=false;while(!s){const i=c.shift();if(!i){if(u===0)h.end();return}u++;l.add(i);const f=i.readdirSync();for(const i of f){if(!o||o(i)){if(!h.write(r?i:i.fullpath())){s=true}}}u--;for(const s of f){let i=s;if(s.isSymbolicLink()){if(!(n&&(i=s.realpathSync())))continue;if(i.isUnknown())i.lstatSync()}if(i.shouldWalk(l,a)){c.push(i)}}}if(s&&!h.flowing)h.once("drain",process)};process();return h}chdir(s=this.cwd){const i=this.cwd;this.cwd=typeof s==="string"?this.cwd.resolve(s):s;this.cwd[Zt](i)}}class PathScurryWin32 extends PathScurryBase{sep="\\";constructor(s=process.cwd(),i={}){const{nocase:r=true}=i;super(s,U.win32,"\\",{...i,nocase:r});this.nocase=r;for(let s=this.cwd;s;s=s.parent){s.nocase=this.nocase}}parseRootPath(s){return U.win32.parse(s).root.toUpperCase()}newRoot(s){return new PathWin32(this.rootPath,Dt,undefined,this.roots,this.nocase,this.childrenCache(),{fs:s})}isAbsolute(s){return s.startsWith("/")||s.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(s)}}class PathScurryPosix extends PathScurryBase{sep="/";constructor(s=process.cwd(),i={}){const{nocase:r=false}=i;super(s,U.posix,"/",{...i,nocase:r});this.nocase=r}parseRootPath(s){return"/"}newRoot(s){return new PathPosix(this.rootPath,Dt,undefined,this.roots,this.nocase,this.childrenCache(),{fs:s})}isAbsolute(s){return s.startsWith("/")}}class PathScurryDarwin extends PathScurryPosix{constructor(s=process.cwd(),i={}){const{nocase:r=true}=i;super(s,{...i,nocase:r})}}const Qt=process.platform==="win32"?PathWin32:PathPosix;const Xt=process.platform==="win32"?PathScurryWin32:process.platform==="darwin"?PathScurryDarwin:PathScurryPosix;const isPatternList=s=>s.length>=1;const isGlobList=s=>s.length>=1;class Pattern{#Jt;#Yt;#Zt;length;#Qt;#Xt;#te;#ee;#se;#ie;#re=true;constructor(s,i,r,n){if(!isPatternList(s)){throw new TypeError("empty pattern list")}if(!isGlobList(i)){throw new TypeError("empty glob list")}if(i.length!==s.length){throw new TypeError("mismatched pattern list and glob list lengths")}this.length=s.length;if(r<0||r>=this.length){throw new TypeError("index out of range")}this.#Jt=s;this.#Yt=i;this.#Zt=r;this.#Qt=n;if(this.#Zt===0){if(this.isUNC()){const[s,i,r,n,...o]=this.#Jt;const[a,h,l,c,...u]=this.#Yt;if(o[0]===""){o.shift();u.shift()}const f=[s,i,r,n,""].join("/");const d=[a,h,l,c,""].join("/");this.#Jt=[f,...o];this.#Yt=[d,...u];this.length=this.#Jt.length}else if(this.isDrive()||this.isAbsolute()){const[s,...i]=this.#Jt;const[r,...n]=this.#Yt;if(i[0]===""){i.shift();n.shift()}const o=s+"/";const a=r+"/";this.#Jt=[o,...i];this.#Yt=[a,...n];this.length=this.#Jt.length}}}pattern(){return this.#Jt[this.#Zt]}isString(){return typeof this.#Jt[this.#Zt]==="string"}isGlobstar(){return this.#Jt[this.#Zt]===O}isRegExp(){return this.#Jt[this.#Zt]instanceof RegExp}globString(){return this.#te=this.#te||(this.#Zt===0?this.isAbsolute()?this.#Yt[0]+this.#Yt.slice(1).join("/"):this.#Yt.join("/"):this.#Yt.slice(this.#Zt).join("/"))}hasMore(){return this.length>this.#Zt+1}rest(){if(this.#Xt!==undefined)return this.#Xt;if(!this.hasMore())return this.#Xt=null;this.#Xt=new Pattern(this.#Jt,this.#Yt,this.#Zt+1,this.#Qt);this.#Xt.#ie=this.#ie;this.#Xt.#se=this.#se;this.#Xt.#ee=this.#ee;return this.#Xt}isUNC(){const s=this.#Jt;return this.#se!==undefined?this.#se:this.#se=this.#Qt==="win32"&&this.#Zt===0&&s[0]===""&&s[1]===""&&typeof s[2]==="string"&&!!s[2]&&typeof s[3]==="string"&&!!s[3]}isDrive(){const s=this.#Jt;return this.#ee!==undefined?this.#ee:this.#ee=this.#Qt==="win32"&&this.#Zt===0&&this.length>1&&typeof s[0]==="string"&&/^[a-z]:$/i.test(s[0])}isAbsolute(){const s=this.#Jt;return this.#ie!==undefined?this.#ie:this.#ie=s[0]===""&&s.length>1||this.isDrive()||this.isUNC()}root(){const s=this.#Jt[0];return typeof s==="string"&&this.isAbsolute()&&this.#Zt===0?s:""}checkFollowGlobstar(){return!(this.#Zt===0||!this.isGlobstar()||!this.#re)}markFollowGlobstar(){if(this.#Zt===0||!this.isGlobstar()||!this.#re)return false;this.#re=false;return true}}const te=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Ignore{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(s,{nobrace:i,nocase:r,noext:n,noglobstar:o,platform:a=te}){this.relative=[];this.absolute=[];this.relativeChildren=[];this.absoluteChildren=[];this.platform=a;this.mmopts={dot:true,nobrace:i,nocase:r,noext:n,noglobstar:o,optimizationLevel:2,platform:a,nocomment:true,nonegate:true};for(const i of s)this.add(i)}add(s){const i=new Minimatch(s,this.mmopts);for(let s=0;s<i.set.length;s++){const r=i.set[s];const n=i.globParts[s];if(!r||!n){throw new Error("invalid pattern object")}while(r[0]==="."&&n[0]==="."){r.shift();n.shift()}const o=new Pattern(r,n,0,this.platform);const a=new Minimatch(o.globString(),this.mmopts);const h=n[n.length-1]==="**";const l=o.isAbsolute();if(l)this.absolute.push(a);else this.relative.push(a);if(h){if(l)this.absoluteChildren.push(a);else this.relativeChildren.push(a)}}}ignored(s){const i=s.fullpath();const r=`${i}/`;const n=s.relative()||".";const o=`${n}/`;for(const s of this.relative){if(s.match(n)||s.match(o))return true}for(const s of this.absolute){if(s.match(i)||s.match(r))return true}return false}childrenIgnored(s){const i=s.fullpath()+"/";const r=(s.relative()||".")+"/";for(const s of this.relativeChildren){if(s.match(r))return true}for(const s of this.absoluteChildren){if(s.match(i))return true}return false}}class HasWalkedCache{store;constructor(s=new Map){this.store=s}copy(){return new HasWalkedCache(new Map(this.store))}hasWalked(s,i){return this.store.get(s.fullpath())?.has(i.globString())}storeWalked(s,i){const r=s.fullpath();const n=this.store.get(r);if(n)n.add(i.globString());else this.store.set(r,new Set([i.globString()]))}}class MatchRecord{store=new Map;add(s,i,r){const n=(i?2:0)|(r?1:0);const o=this.store.get(s);this.store.set(s,o===undefined?n:n&o)}entries(){return[...this.store.entries()].map((([s,i])=>[s,!!(i&2),!!(i&1)]))}}class SubWalks{store=new Map;add(s,i){if(!s.canReaddir()){return}const r=this.store.get(s);if(r){if(!r.find((s=>s.globString()===i.globString()))){r.push(i)}}else this.store.set(s,[i])}get(s){const i=this.store.get(s);if(!i){throw new Error("attempting to walk unknown path")}return i}entries(){return this.keys().map((s=>[s,this.store.get(s)]))}keys(){return[...this.store.keys()].filter((s=>s.canReaddir()))}}class Processor{hasWalkedCache;matches=new MatchRecord;subwalks=new SubWalks;patterns;follow;dot;opts;constructor(s,i){this.opts=s;this.follow=!!s.follow;this.dot=!!s.dot;this.hasWalkedCache=i?i.copy():new HasWalkedCache}processPatterns(s,i){this.patterns=i;const r=i.map((i=>[s,i]));for(let[s,i]of r){this.hasWalkedCache.storeWalked(s,i);const r=i.root();const n=i.isAbsolute()&&this.opts.absolute!==false;if(r){s=s.resolve(r==="/"&&this.opts.root!==undefined?this.opts.root:r);const n=i.rest();if(!n){this.matches.add(s,true,false);continue}else{i=n}}if(s.isENOENT())continue;let o;let a;let h=false;while(typeof(o=i.pattern())==="string"&&(a=i.rest())){const r=s.resolve(o);s=r;i=a;h=true}o=i.pattern();a=i.rest();if(h){if(this.hasWalkedCache.hasWalked(s,i))continue;this.hasWalkedCache.storeWalked(s,i)}if(typeof o==="string"){const i=o===".."||o===""||o===".";this.matches.add(s.resolve(o),n,i);continue}else if(o===O){if(!s.isSymbolicLink()||this.follow||i.checkFollowGlobstar()){this.subwalks.add(s,i)}const r=a?.pattern();const o=a?.rest();if(!a||(r===""||r===".")&&!o){this.matches.add(s,n,r===""||r===".")}else{if(r===".."){const i=s.parent||s;if(!o)this.matches.add(i,n,true);else if(!this.hasWalkedCache.hasWalked(i,o)){this.subwalks.add(i,o)}}}}else if(o instanceof RegExp){this.subwalks.add(s,i)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Processor(this.opts,this.hasWalkedCache)}filterEntries(s,i){const r=this.subwalks.get(s);const n=this.child();for(const s of i){for(const i of r){const r=i.isAbsolute();const o=i.pattern();const a=i.rest();if(o===O){n.testGlobstar(s,i,a,r)}else if(o instanceof RegExp){n.testRegExp(s,o,a,r)}else{n.testString(s,o,a,r)}}}return n}testGlobstar(s,i,r,n){if(this.dot||!s.name.startsWith(".")){if(!i.hasMore()){this.matches.add(s,n,false)}if(s.canReaddir()){if(this.follow||!s.isSymbolicLink()){this.subwalks.add(s,i)}else if(s.isSymbolicLink()){if(r&&i.checkFollowGlobstar()){this.subwalks.add(s,r)}else if(i.markFollowGlobstar()){this.subwalks.add(s,i)}}}}if(r){const i=r.pattern();if(typeof i==="string"&&i!==".."&&i!==""&&i!=="."){this.testString(s,i,r.rest(),n)}else if(i===".."){const i=s.parent||s;this.subwalks.add(i,r)}else if(i instanceof RegExp){this.testRegExp(s,i,r.rest(),n)}}}testRegExp(s,i,r,n){if(!i.test(s.name))return;if(!r){this.matches.add(s,n,false)}else{this.subwalks.add(s,r)}}testString(s,i,r,n){if(!s.isNamed(i))return;if(!r){this.matches.add(s,n,false)}else{this.subwalks.add(s,r)}}}const makeIgnore=(s,i)=>typeof s==="string"?new Ignore([s],i):Array.isArray(s)?new Ignore(s,i):s;class GlobUtil{path;patterns;opts;seen=new Set;paused=false;aborted=false;#ne=[];#oe;#ae;signal;maxDepth;includeChildMatches;constructor(s,i,r){this.patterns=s;this.path=i;this.opts=r;this.#ae=!r.posix&&r.platform==="win32"?"\\":"/";this.includeChildMatches=r.includeChildMatches!==false;if(r.ignore||!this.includeChildMatches){this.#oe=makeIgnore(r.ignore??[],r);if(!this.includeChildMatches&&typeof this.#oe.add!=="function"){const s="cannot ignore child matches, ignore lacks add() method.";throw new Error(s)}}this.maxDepth=r.maxDepth||Infinity;if(r.signal){this.signal=r.signal;this.signal.addEventListener("abort",(()=>{this.#ne.length=0}))}}#he(s){return this.seen.has(s)||!!this.#oe?.ignored?.(s)}#le(s){return!!this.#oe?.childrenIgnored?.(s)}pause(){this.paused=true}resume(){if(this.signal?.aborted)return;this.paused=false;let s=undefined;while(!this.paused&&(s=this.#ne.shift())){s()}}onResume(s){if(this.signal?.aborted)return;if(!this.paused){s()}else{this.#ne.push(s)}}async matchCheck(s,i){if(i&&this.opts.nodir)return undefined;let r;if(this.opts.realpath){r=s.realpathCached()||await s.realpath();if(!r)return undefined;s=r}const n=s.isUnknown()||this.opts.stat;const o=n?await s.lstat():s;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){const s=await o.realpath();if(s&&(s.isUnknown()||this.opts.stat)){await s.lstat()}}return this.matchCheckTest(o,i)}matchCheckTest(s,i){return s&&(this.maxDepth===Infinity||s.depth()<=this.maxDepth)&&(!i||s.canReaddir())&&(!this.opts.nodir||!s.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!s.isSymbolicLink()||!s.realpathCached()?.isDirectory())&&!this.#he(s)?s:undefined}matchCheckSync(s,i){if(i&&this.opts.nodir)return undefined;let r;if(this.opts.realpath){r=s.realpathCached()||s.realpathSync();if(!r)return undefined;s=r}const n=s.isUnknown()||this.opts.stat;const o=n?s.lstatSync():s;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){const s=o.realpathSync();if(s&&(s?.isUnknown()||this.opts.stat)){s.lstatSync()}}return this.matchCheckTest(o,i)}matchFinish(s,i){if(this.#he(s))return;if(!this.includeChildMatches&&this.#oe?.add){const i=`${s.relativePosix()}/**`;this.#oe.add(i)}const r=this.opts.absolute===undefined?i:this.opts.absolute;this.seen.add(s);const n=this.opts.mark&&s.isDirectory()?this.#ae:"";if(this.opts.withFileTypes){this.matchEmit(s)}else if(r){const i=this.opts.posix?s.fullpathPosix():s.fullpath();this.matchEmit(i+n)}else{const i=this.opts.posix?s.relativePosix():s.relative();const r=this.opts.dotRelative&&!i.startsWith(".."+this.#ae)?"."+this.#ae:"";this.matchEmit(!i?"."+n:r+i+n)}}async match(s,i,r){const n=await this.matchCheck(s,r);if(n)this.matchFinish(n,i)}matchSync(s,i,r){const n=this.matchCheckSync(s,r);if(n)this.matchFinish(n,i)}walkCB(s,i,r){if(this.signal?.aborted)r();this.walkCB2(s,i,new Processor(this.opts),r)}walkCB2(s,i,r,n){if(this.#le(s))return n();if(this.signal?.aborted)n();if(this.paused){this.onResume((()=>this.walkCB2(s,i,r,n)));return}r.processPatterns(s,i);let o=1;const next=()=>{if(--o===0)n()};for(const[s,i,n]of r.matches.entries()){if(this.#he(s))continue;o++;this.match(s,i,n).then((()=>next()))}for(const s of r.subwalkTargets()){if(this.maxDepth!==Infinity&&s.depth()>=this.maxDepth){continue}o++;const i=s.readdirCached();if(s.calledReaddir())this.walkCB3(s,i,r,next);else{s.readdirCB(((i,n)=>this.walkCB3(s,n,r,next)),true)}}next()}walkCB3(s,i,r,n){r=r.filterEntries(s,i);let o=1;const next=()=>{if(--o===0)n()};for(const[s,i,n]of r.matches.entries()){if(this.#he(s))continue;o++;this.match(s,i,n).then((()=>next()))}for(const[s,i]of r.subwalks.entries()){o++;this.walkCB2(s,i,r.child(),next)}next()}walkCBSync(s,i,r){if(this.signal?.aborted)r();this.walkCB2Sync(s,i,new Processor(this.opts),r)}walkCB2Sync(s,i,r,n){if(this.#le(s))return n();if(this.signal?.aborted)n();if(this.paused){this.onResume((()=>this.walkCB2Sync(s,i,r,n)));return}r.processPatterns(s,i);let o=1;const next=()=>{if(--o===0)n()};for(const[s,i,n]of r.matches.entries()){if(this.#he(s))continue;this.matchSync(s,i,n)}for(const s of r.subwalkTargets()){if(this.maxDepth!==Infinity&&s.depth()>=this.maxDepth){continue}o++;const i=s.readdirSync();this.walkCB3Sync(s,i,r,next)}next()}walkCB3Sync(s,i,r,n){r=r.filterEntries(s,i);let o=1;const next=()=>{if(--o===0)n()};for(const[s,i,n]of r.matches.entries()){if(this.#he(s))continue;this.matchSync(s,i,n)}for(const[s,i]of r.subwalks.entries()){o++;this.walkCB2Sync(s,i,r.child(),next)}next()}}class GlobWalker extends GlobUtil{matches=new Set;constructor(s,i,r){super(s,i,r)}matchEmit(s){this.matches.add(s)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){await this.path.lstat()}await new Promise(((s,i)=>{this.walkCB(this.path,this.patterns,(()=>{if(this.signal?.aborted){i(this.signal.reason)}else{s(this.matches)}}))}));return this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason}));return this.matches}}class GlobStream extends GlobUtil{results;constructor(s,i,r){super(s,i,r);this.results=new Minipass({signal:this.signal,objectMode:true});this.results.on("drain",(()=>this.resume()));this.results.on("resume",(()=>this.resume()))}matchEmit(s){this.results.write(s);if(!this.results.flowing)this.pause()}stream(){const s=this.path;if(s.isUnknown()){s.lstat().then((()=>{this.walkCB(s,this.patterns,(()=>this.results.end()))}))}else{this.walkCB(s,this.patterns,(()=>this.results.end()))}return this.results}streamSync(){if(this.path.isUnknown()){this.path.lstatSync()}this.walkCBSync(this.path,this.patterns,(()=>this.results.end()));return this.results}}const ee=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";class Glob{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(s,i){if(!i)throw new TypeError("glob options required");this.withFileTypes=!!i.withFileTypes;this.signal=i.signal;this.follow=!!i.follow;this.dot=!!i.dot;this.dotRelative=!!i.dotRelative;this.nodir=!!i.nodir;this.mark=!!i.mark;if(!i.cwd){this.cwd=""}else if(i.cwd instanceof URL||i.cwd.startsWith("file://")){i.cwd=(0,M.fileURLToPath)(i.cwd)}this.cwd=i.cwd||"";this.root=i.root;this.magicalBraces=!!i.magicalBraces;this.nobrace=!!i.nobrace;this.noext=!!i.noext;this.realpath=!!i.realpath;this.absolute=i.absolute;this.includeChildMatches=i.includeChildMatches!==false;this.noglobstar=!!i.noglobstar;this.matchBase=!!i.matchBase;this.maxDepth=typeof i.maxDepth==="number"?i.maxDepth:Infinity;this.stat=!!i.stat;this.ignore=i.ignore;if(this.withFileTypes&&this.absolute!==undefined){throw new Error("cannot set absolute and withFileTypes:true")}if(typeof s==="string"){s=[s]}this.windowsPathsNoEscape=!!i.windowsPathsNoEscape||i.allowWindowsEscape===false;if(this.windowsPathsNoEscape){s=s.map((s=>s.replace(/\\/g,"/")))}if(this.matchBase){if(i.noglobstar){throw new TypeError("base matching requires globstar")}s=s.map((s=>s.includes("/")?s:`./**/${s}`))}this.pattern=s;this.platform=i.platform||ee;this.opts={...i,platform:this.platform};if(i.scurry){this.scurry=i.scurry;if(i.nocase!==undefined&&i.nocase!==i.scurry.nocase){throw new Error("nocase option contradicts provided scurry option")}}else{const s=i.platform==="win32"?PathScurryWin32:i.platform==="darwin"?PathScurryDarwin:i.platform?PathScurryPosix:Xt;this.scurry=new s(this.cwd,{nocase:i.nocase,fs:i.fs})}this.nocase=this.scurry.nocase;const r=this.platform==="darwin"||this.platform==="win32";const n={...i,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:r,nocomment:true,noext:this.noext,nonegate:true,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug};const o=this.pattern.map((s=>new Minimatch(s,n)));const[a,h]=o.reduce(((s,i)=>{s[0].push(...i.set);s[1].push(...i.globParts);return s}),[[],[]]);this.patterns=a.map(((s,i)=>{const r=h[i];if(!r)throw new Error("invalid pattern object");return new Pattern(s,r,0,this.platform)}))}async walk(){return[...await new GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==Infinity?this.maxDepth+this.scurry.cwd.depth():Infinity,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}const hasMagic=(s,i={})=>{if(!Array.isArray(s)){s=[s]}for(const r of s){if(new Minimatch(r,i).hasMagic())return true}return false};function globStreamSync(s,i={}){return new Glob(s,i).streamSync()}function globStream(s,i={}){return new Glob(s,i).stream()}function globSync(s,i={}){return new Glob(s,i).walkSync()}async function glob_(s,i={}){return new Glob(s,i).walk()}function globIterateSync(s,i={}){return new Glob(s,i).iterateSync()}function globIterate(s,i={}){return new Glob(s,i).iterate()}const se=globStreamSync;const ie=Object.assign(globStream,{sync:globStreamSync});const re=globIterateSync;const ne=Object.assign(globIterate,{sync:globIterateSync});const oe=Object.assign(globSync,{stream:globStreamSync,iterate:globIterateSync});const ae=Object.assign(glob_,{glob:glob_,globSync:globSync,sync:oe,globStream:globStream,stream:ie,globStreamSync:globStreamSync,streamSync:se,globIterate:globIterate,iterate:ne,globIterateSync:globIterateSync,iterateSync:re,Glob:Glob,hasMagic:hasMagic,escape:escape_escape,unescape:unescape_unescape});ae.glob=ae;var unescapeContent=function(s){return s.replace(/\\[^u]|\\u.{4}/g,(function(s){var i=s.charAt(1);switch(i){case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"u":var r=s.slice(2,6);if(!/[\da-f]{4}/i.test(r))throw new Error("malformed escaped unicode characters '\\u".concat(r,"'"));return String.fromCodePoint(Number.parseInt(r,16));default:return i}}))};var he=undefined&&undefined.__values||function(s){var i="function"==typeof Symbol&&Symbol.iterator,r=i&&s[i],n=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};var le=function(){function t(s,i,r){this.key="",this.escapedKey="",this.hasNoKey=!1,this.hasMultilineKey=!1,this.keyCollisionLines=[],this.hasKeyCollisions=!1,this.value="",this.escapedValue="",this.hasNoValue=!1,this.newlinePositions=[],this.linesContent=s.content,this.startingLineNumber=i,this.endingLineNumber=i,this.previousProperty=r,null==r||r.setNextProperty(this)}return t.prototype.setNextProperty=function(s){this.nextProperty=s},t.prototype.addLine=function(s){this.linesContent.length>0&&(this.newlinePositions.push(this.linesContent.length),this.endingLineNumber++),this.linesContent+=s.content},t.prototype.setKeyAndValue=function(){this.findSeparator(),void 0!==this.separatorPosition&&void 0!==this.separatorLength?(this.hasNoKey||(this.escapedKey=this.linesContent.slice(0,this.separatorPosition),this.key=this.unescapeLine(this.escapedKey,this.startingLineNumber)),this.hasNoValue||(this.escapedValue=this.linesContent.slice(this.separatorPosition+this.separatorLength),this.value=this.unescapeLine(this.escapedValue,this.startingLineNumber))):this.hasNoValue&&(this.escapedKey=this.linesContent,this.key=this.unescapeLine(this.escapedKey,this.startingLineNumber))},t.prototype.unescapeLine=function(s,i){try{return unescapeContent(s)}catch(s){throw new Error("".concat(s.message," in property starting at line ").concat(i))}},t.prototype.findSeparator=function(){var s,i,r,n;if(!(this.hasNoKey||this.hasNoValue||this.separatorPosition)){try{for(var o=he(this.linesContent.matchAll(/[\t\f :=]/g)),a=o.next();!a.done;a=o.next()){var h=a.value.index,l=this.linesContent.slice(0,h).match(/(?<backslashes>\\+)$/);if(null==l?void 0:l.groups)if(!!(l.groups.backslashes.length%2))continue;var c="";this.separatorPosition=h;var u=this.linesContent.slice(h),f=u.match(/^(?<whitespace>[\t\n\v\f\r ]+)/),d=(null===(r=null==f?void 0:f.groups)||void 0===r?void 0:r.whitespace)||"";if(d.length>0&&(c+=d,u=u.slice(d.length)),/[:=]/.test(u[0])){c+=u[0];var p=(u=u.slice(1)).match(/^(?<whitespace>[\t\n\v\f\r ]+)/);c+=(null===(n=null==p?void 0:p.groups)||void 0===n?void 0:n.whitespace)||""}this.separatorLength=c.length,this.valuePosition=this.separatorPosition+this.separatorLength,this.separator=this.linesContent.slice(this.separatorPosition,this.separatorPosition+this.separatorLength),h||(this.hasNoKey=!0);break}}catch(i){s={error:i}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}void 0===this.separatorPosition?this.hasNoValue=!0:this.newlinePositions.length>0&&this.newlinePositions[0]<this.separatorPosition&&(this.hasMultilineKey=!0)}},t}();var PropertyLine=function(s,i){if(this.isContinuing=!1,this.isBlank=!1,this.isComment=!1,this.content=s.trimStart(),this.isMultiline=i,0===this.content.length)this.isBlank=!0;else if(this.isMultiline||(this.isComment=!!/^[!#]/.test(this.content)),!this.isComment){var r=this.content.match(/(?<backslashes>\\+)$/);(null==r?void 0:r.groups)&&(this.isContinuing=!!(r.groups.backslashes.length%2),this.isContinuing&&(this.content=this.content.slice(0,-1)))}};var ce=undefined&&undefined.__values||function(s){var i="function"==typeof Symbol&&Symbol.iterator,r=i&&s[i],n=0;if(r)return r.call(s);if(s&&"number"==typeof s.length)return{next:function(){return s&&n>=s.length&&(s=void 0),{value:s&&s[n++],done:!s}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ue=undefined&&undefined.__read||function(s,i){var r="function"==typeof Symbol&&s[Symbol.iterator];if(!r)return s;var n,o,a=r.call(s),h=[];try{for(;(void 0===i||i-- >0)&&!(n=a.next()).done;)h.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return h};var fe="\ufeff";var de=fe.codePointAt(0);var pe="\n";var getFirstEolCharacter=function(s){var i=s.indexOf("\n");return i<0?void 0:"".concat("\r"===s[i-1]?"\r":"","\n")};var ge=function(){function e(s){var i;this.collection=[],this.keyLineNumbers={};var r="string"==typeof s?s:s.toString();this.hasBom=r.codePointAt(0)===de,this.eolCharacter=null!==(i=getFirstEolCharacter(r))&&void 0!==i?i:pe,this.lines=(this.hasBom?r.slice(1):r).split(/\r?\n/),this.parseLines()}return e.prototype.parseLines=function(){var s,i;this.collection=[],this.keyLineNumbers={};var r,n,o=0;try{for(var a=ce(this.lines),h=a.next();!h.done;h=a.next()){var l=h.value;o++;var c=new PropertyLine(l,!!r);if(r){if(r.addLine(c),c.isContinuing)continue}else{if(c.isComment||c.isBlank)continue;if(r=new le(c,o,n),c.isContinuing)continue}this.addToCollection(r),n=r,r=void 0}}catch(i){s={error:i}}finally{try{h&&!h.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}},e.prototype.addToCollection=function(s){var i;s.setKeyAndValue(),(null===(i=this.keyLineNumbers[s.key])||void 0===i?void 0:i.length)?(this.keyLineNumbers[s.key].push(s.startingLineNumber),s.hasKeyCollisions=!0,s.keyCollisionLines=this.keyLineNumbers[s.key],this.collection=this.collection.filter((function(i){return i.key!==s.key}))):this.keyLineNumbers[s.key]=[s.startingLineNumber],this.collection.push(s)},e.prototype.getKeyCollisions=function(){var s,i,r=[];try{for(var n=ce(Object.entries(this.keyLineNumbers)),o=n.next();!o.done;o=n.next()){var a=ue(o.value,2),h=a[0],l=a[1];l.length>1&&r.push(new me(h,l))}}catch(i){s={error:i}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return r},e.prototype.toObject=function(){var s={};return this.collection.forEach((function(i){s[i.key]=i.value})),s},e.prototype.format=function(s){return"".concat(this.hasBom?fe:"").concat(this.lines.join(s||this.eolCharacter))},e}();var me=function(){function e(s,i){this.key=s,this.startingLineNumbers=i}return e.prototype.getApplicableLineNumber=function(){return this.startingLineNumbers.slice(-1)[0]},e}();var getProperties=function(s){return new ge(s).toObject()};const setSingleValue=(s,r)=>{i.debug(`🧪 Setting output ${s} to ${r}`);i.setOutput(s,r);i.setOutput("value",r);i.debug(`🧓 Setting legacy output value to ${r} (for backwards compatibility)`)};const run=async s=>{i.debug(`Got back file ${s.file}`);const r=await ae(s.file,{ignore:["**/node_modules/**","**/.gradle/**"]});i.debug(`Got back propertiesFiles ${r}`);if(r.length===0)throw new Error(`No properties files found with pattern ${s.file}`);if(r.length>1)i.warning(`Multiple properties files found, using first one (${r[0]}).`);if(!r[0]?.toLowerCase()?.endsWith(".properties"))throw new Error(`File ${r[0]} is not a properties file`);if(!r[0])throw new Error(`File ${r[0]} is undefined/null... This should not happen!`);if(!W().existsSync(r[0]))throw new Error(`File ${r[0]} does not exist... This should not happen!`);const o=r[0];i.debug(`🤔 Using properties file ${o}`);const a=await(0,n.readFile)(o,"utf8"),h=getProperties(a);if(s.all){i.debug("🧪 Got all as true, setting all properties as outputs");for(const[s,r]of Object.entries(h)){i.debug(`🧪 Setting output ${s} to ${r}`);i.setOutput(s,r)}i.info("🚀 Successfully set all properties as outputs");return}const{property:l}=s;if(!l)throw new Error("Property is not defined");const c=h[l];if(c){i.debug(`🧪 Setting output ${l} to ${c}`);setSingleValue(l,c);i.info(`🚀 Successfully set property ${l} as output`);return}const u=s.default;if(u){i.debug(`🧪 Got a default value ${u} for property ${l} returning that instead`);setSingleValue(l,u);i.info(`🚀 Successfully set property ${l} as output`);return}throw new Error(`Property ${l} not found in properties file`)};const ye=Date.now(),main=async()=>{i.debug("⌛ Starting...");await run({file:(0,r.getInput)("file",{type:"string",required:true}),property:(0,r.getInput)("property",{type:"string",required:false,disableable:true}),all:(0,r.getInput)("all",{type:"boolean",default:false,disableable:true}),default:(0,r.getInput)("default",{type:"string",required:false,disableable:true})});i.debug(`⌛ Ran in ${Date.now()-ye}ms`)};main().catch((s=>{i.setFailed(s instanceof Error?s:String(s));i.debug(`⌛ Ran in ${Date.now()-ye}ms`)}))})();
//# sourceMappingURL=index.js.map